{"version":3,"file":"src_ssr_projects_dataviz_enhancer_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/ssr/projects/dataviz.enhancer.tsx","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/content-utility/real-mobile.ts","webpack://personal-site/./src/utils/tooltip/tooltip.ts","webpack://personal-site/./src/utils/tooltip/tooltipInit.ts"],"sourcesContent":["// src/components/dataviz/DataVizEnhancer.tsx\r\nimport { useEffect } from 'react';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\n\r\nexport default function DataVizEnhancer() {\r\n  useTooltipInit();\r\n\r\n  useEffect(() => {\r\n    const vid = document.getElementById('dataviz-media-video') as HTMLVideoElement | null;\r\n    if (!vid) return;\r\n\r\n    const cleanupFns: Array<() => void> = [];\r\n\r\n    // 1) Upgrade poster to high-res if provided by SSR\r\n    const fullPoster = vid.dataset?.srcFull;\r\n    if (fullPoster && vid.poster !== fullPoster) {\r\n      vid.poster = fullPoster;\r\n    }\r\n\r\n    // 2) Load eagerly if needed\r\n    if (vid.readyState === 0) {\r\n      vid.preload = 'auto'; // can also use 'metadata' if lighter load desired\r\n      try { vid.load(); } catch {}\r\n    }\r\n\r\n    // 3) Hide poster after first painted frame\r\n    const hidePoster = () => {\r\n      vid.removeAttribute('poster');\r\n    };\r\n\r\n    const onPlay = () => {\r\n      const anyV = vid as any;\r\n      if (typeof anyV.requestVideoFrameCallback === 'function') {\r\n        anyV.requestVideoFrameCallback(() => hidePoster());\r\n      } else {\r\n        const onTime = () => {\r\n          if (vid.currentTime > 0 && vid.readyState >= 2) {\r\n            vid.removeEventListener('timeupdate', onTime);\r\n            hidePoster();\r\n          }\r\n        };\r\n        vid.addEventListener('timeupdate', onTime, { once: true });\r\n        cleanupFns.push(() => vid.removeEventListener('timeupdate', onTime));\r\n\r\n        // Safety backstop\r\n        const timer = setTimeout(() => {\r\n          vid.removeEventListener('timeupdate', onTime);\r\n          hidePoster();\r\n        }, 1200);\r\n        cleanupFns.push(() => clearTimeout(timer));\r\n      }\r\n    };\r\n\r\n    vid.addEventListener('play', onPlay, { once: true });\r\n    cleanupFns.push(() => vid.removeEventListener('play', onPlay));\r\n\r\n    // 4) Try autoplay (muted/inline usually works)\r\n    vid.play().catch(() => {\r\n      // If blocked, poster will remain until user interacts\r\n    });\r\n\r\n    // 5) Optional: pause when tab hidden\r\n    const onVis = () => { if (document.hidden) vid.pause(); };\r\n    document.addEventListener('visibilitychange', onVis);\r\n    cleanupFns.push(() => document.removeEventListener('visibilitychange', onVis));\r\n\r\n    return () => cleanupFns.forEach(fn => fn());\r\n  }, []);\r\n\r\n  return null;\r\n}\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","// utils/tooltip/global-tooltip.ts\r\nimport '../../styles/tooltip.css';\r\nimport { projectColors } from '../content-utility/color-map';\r\n\r\ntype TooltipInfo = { tags: string[]; backgroundColor: string };\r\nconst tooltipDataCache: Record<string, TooltipInfo> = {};\r\n\r\nconst LOCAL_FALLBACK_TAGS: Record<string, string[]> = {\r\n  'block-g': ['#q5.js Canvas', '#Gamification', '#Lottie Animation'],\r\n};\r\n\r\nconst TITLE_BY_KEY: Record<string, string> = {\r\n  'rotary-lamp': 'Rotary Lamp',\r\n  'ice-scoop': 'Ice Cream Scoop',\r\n  'data-viz': 'Data Visualization',\r\n  'block-g': 'Evade the Rock',\r\n  'dynamic': 'Dynamic App',\r\n};\r\n\r\nfunction bgForKey(key: string) {\r\n  const colorInfo = projectColors[TITLE_BY_KEY[key]];\r\n  const alpha = colorInfo?.tooltipAlpha ?? 0.6;\r\n  return colorInfo ? `rgba(${colorInfo.rgb}, ${alpha})` : 'rgba(85,95,90,0.6)';\r\n}\r\n\r\nfunction createTooltipDOM() {\r\n  const el = document.createElement('div');\r\n  el.id = 'custom-global-tooltip';\r\n  el.style.position = 'fixed';\r\n  el.style.pointerEvents = 'none';\r\n  el.style.zIndex = '9999';\r\n  el.style.opacity = '0';\r\n  el.style.visibility = 'hidden';\r\n  el.style.backdropFilter = 'blur(8px)';\r\n  el.style.color = '#fff';\r\n  el.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';\r\n  el.className = 'custom-tooltip-blur';\r\n  const root = document.getElementById('efe-portfolio') || document.body;\r\n  root.appendChild(el);\r\n  return el as HTMLDivElement;\r\n}\r\n\r\nlet tooltipEl: HTMLDivElement | null = null;\r\nlet currentKey = '';\r\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n// IO gating state\r\nlet io: IntersectionObserver | null = null;\r\nlet observedEl: Element | null = null;\r\nlet visibleEnough = true; // only show/apply when true\r\n\r\nexport const fetchTooltipDataForKey = async (key: string): Promise<TooltipInfo> => {\r\n  if (tooltipDataCache[key]) return tooltipDataCache[key];\r\n\r\n  const bg = bgForKey(key);\r\n\r\n  if (LOCAL_FALLBACK_TAGS[key]) {\r\n    const info = { tags: LOCAL_FALLBACK_TAGS[key], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n\r\n  try {\r\n    const client = (await import('../sanity')).default;\r\n    const res = await client.fetch<{ tags?: string[] } | null>(\r\n      `*[_type==\"mediaBlock\" && slug.current == $key][0]{ tags }`,\r\n      { key }\r\n    );\r\n    const info: TooltipInfo = { tags: res?.tags ?? [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  } catch {\r\n    const info: TooltipInfo = { tags: [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n};\r\n\r\nconst showTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (!visibleEnough) return; // 🚫 gate: do not show if target < 0.3 visible\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '1';\r\n  tooltipEl.style.visibility = 'visible';\r\n  hideTimeout = setTimeout(() => hideTooltip(), 1_500);\r\n};\r\n\r\nconst hideTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '0';\r\n  tooltipEl.style.visibility = 'hidden';\r\n  // keep currentKey so we can re-show quickly if still over same element\r\n};\r\n\r\nfunction positionTooltip(x: number, y: number) {\r\n  if (!tooltipEl) return;\r\n  const rect = tooltipEl.getBoundingClientRect();\r\n  const padding = 0;\r\n  const vw = window.innerWidth;\r\n  const vh = window.innerHeight;\r\n\r\n  const nearTop = y < rect.height + padding + 20;\r\n  const nearBottom = y + rect.height + padding > vh - 20;\r\n  const nearRight = x + rect.width + padding > vw - 20;\r\n  const nearLeft = x < rect.width + padding + 20;\r\n\r\n  let left: number, top: number;\r\n  if (nearBottom) { top = y - rect.height - padding - 8; left = x - rect.width * 0; }\r\n  else if (nearTop) { top = y + padding - 14; left = x - rect.width * 0; }\r\n  else if (nearRight) { top = y - rect.height / 2; left = x - rect.width - padding - 24; }\r\n  else if (nearLeft) { top = y - rect.height / 2; left = x + padding - 4; }\r\n  else { top = y - rect.height / 1.6; left = x + padding - 2; }\r\n\r\n  left = Math.max(padding, Math.min(left, vw - rect.width - padding));\r\n  top  = Math.max(padding, Math.min(top,  vh - rect.height - padding));\r\n\r\n  tooltipEl.style.left = `${left}px`;\r\n  tooltipEl.style.top  = `${top}px`;\r\n}\r\n\r\n// (new) observe hovered/attached element and gate visibility\r\nfunction observeTargetForVisibility(el: Element | null) {\r\n  if (!('IntersectionObserver' in window)) {\r\n    visibleEnough = true;\r\n    return;\r\n  }\r\n  if (!io) {\r\n    io = new IntersectionObserver(\r\n      (entries) => {\r\n        const e = entries[0];\r\n        const ratio = e?.intersectionRatio ?? 0;\r\n        visibleEnough = !!e?.isIntersecting && ratio >= 0.3; // 🔑 gate at 0.3\r\n        if (!visibleEnough) hideTooltip();\r\n      },\r\n      { root: null, threshold: [0, 0.3, 1] }\r\n    );\r\n  }\r\n  if (observedEl) io.unobserve(observedEl);\r\n  observedEl = el || null;\r\n  if (observedEl) io.observe(observedEl);\r\n}\r\n\r\nexport function initGlobalTooltip(isRealMobile: boolean) {\r\n  if (tooltipEl) return () => {};\r\n  tooltipEl = createTooltipDOM();\r\n\r\n  let lastMouseX = -1;\r\n  let lastMouseY = -1;\r\n  let ticking = false;\r\n  let scrollCheckTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const updateForElement = async (el: Element | null) => {\r\n    if (!(el instanceof HTMLElement)) { hideTooltip(); return; }\r\n\r\n    // find a tooltip-* class on the element or ancestors\r\n    const tooltipHost = el.closest('[class*=\"tooltip-\"]') as HTMLElement | null;\r\n    if (!tooltipHost) { hideTooltip(); observeTargetForVisibility(null); return; }\r\n\r\n    const tooltipClass = Array.from(tooltipHost.classList).find(c => c.startsWith('tooltip-'));\r\n    if (!tooltipClass) { hideTooltip(); observeTargetForVisibility(null); return; }\r\n\r\n    // observe this specific element for visibility gating\r\n    observeTargetForVisibility(tooltipHost);\r\n\r\n    if (!visibleEnough) { hideTooltip(); return; } // don’t apply if under threshold\r\n\r\n    const key = tooltipClass.replace('tooltip-', '');\r\n    if (key !== currentKey) {\r\n      currentKey = key;\r\n      const info = await fetchTooltipDataForKey(key);\r\n\r\n      if (!info.tags.length) { hideTooltip(); return; }\r\n      tooltipEl!.innerHTML = info.tags.map(t => `<p class=\"tooltip-tag\">${t}</p>`).join('');\r\n      tooltipEl!.style.backgroundColor = info.backgroundColor;\r\n      showTooltip();\r\n    } else if (tooltipEl!.style.opacity === '0' || tooltipEl!.style.visibility === 'hidden') {\r\n      showTooltip();\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (e: MouseEvent) => {\r\n    lastMouseX = e.clientX;\r\n    lastMouseY = e.clientY;\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n    updateForElement(e.target as Element);\r\n  };\r\n\r\n  const checkHoveredElementOnScroll = () => {\r\n    if (lastMouseX < 0 || lastMouseY < 0) return;\r\n    const el = document.elementFromPoint(lastMouseX, lastMouseY);\r\n    updateForElement(el);\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n  };\r\n\r\n  const onScroll = () => {\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => { checkHoveredElementOnScroll(); ticking = false; });\r\n      ticking = true;\r\n    }\r\n    if (scrollCheckTimeout) clearTimeout(scrollCheckTimeout);\r\n    scrollCheckTimeout = setTimeout(() => {}, 120);\r\n  };\r\n\r\n  const onMouseOut = (e: MouseEvent) => {\r\n    if (!e.relatedTarget) hideTooltip();\r\n  };\r\n\r\n  if (!isRealMobile) window.addEventListener('scroll', onScroll, true);\r\n  document.addEventListener('mousemove', onMouseMove, { passive: true });\r\n  document.addEventListener('mouseout', onMouseOut, { passive: true });\r\n\r\n  return () => {\r\n    if (!tooltipEl) return;\r\n    if (!isRealMobile) window.removeEventListener('scroll', onScroll, true);\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseout', onMouseOut);\r\n    if (io) {\r\n      if (observedEl) io.unobserve(observedEl);\r\n      io.disconnect();\r\n      io = null;\r\n      observedEl = null;\r\n    }\r\n    tooltipEl.remove();\r\n    tooltipEl = null;\r\n    if (hideTimeout) clearTimeout(hideTimeout);\r\n  };\r\n}\r\n","// utils/tooltip/tooltipInit.ts\r\nimport { useEffect } from 'react';\r\nimport { initGlobalTooltip } from './tooltip';\r\nimport { useRealMobileViewport } from '../content-utility/real-mobile';\r\n\r\nexport const useTooltipInit = () => {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    const dispose = initGlobalTooltip(isRealMobile);\r\n    return () => dispose?.();\r\n  }, [isRealMobile]);\r\n};\r\n"],"names":["useEffect","useTooltipInit","DataVizEnhancer","vid","document","getElementById","cleanupFns","fullPoster","dataset","srcFull","poster","readyState","preload","load","hidePoster","removeAttribute","onPlay","anyV","requestVideoFrameCallback","onTime","currentTime","removeEventListener","addEventListener","once","push","timer","setTimeout","clearTimeout","play","catch","onVis","hidden","pause","forEach","fn","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","useState","useRealMobileViewport","isRealMobile","setIsRealMobile","checkMobile","touch","navigator","maxTouchPoints","coarse","window","matchMedia","matches","width","innerWidth","ua","userAgent","vendor","opera","isIOS","test","platform","isAndroid","realMobile","tooltipDataCache","LOCAL_FALLBACK_TAGS","TITLE_BY_KEY","bgForKey","key","colorInfo","alpha","createTooltipDOM","el","createElement","id","style","position","pointerEvents","zIndex","opacity","visibility","backdropFilter","color","transition","className","root","body","appendChild","tooltipEl","currentKey","hideTimeout","io","observedEl","visibleEnough","fetchTooltipDataForKey","bg","info","tags","backgroundColor","client","default","res","fetch","showTooltip","hideTooltip","positionTooltip","x","y","rect","getBoundingClientRect","padding","vw","vh","innerHeight","nearTop","height","nearBottom","nearRight","nearLeft","left","top","Math","max","min","observeTargetForVisibility","IntersectionObserver","entries","e","ratio","intersectionRatio","isIntersecting","threshold","unobserve","observe","initGlobalTooltip","lastMouseX","lastMouseY","ticking","scrollCheckTimeout","updateForElement","HTMLElement","tooltipHost","closest","tooltipClass","Array","from","classList","find","c","startsWith","replace","length","innerHTML","map","t","join","onMouseMove","clientX","clientY","requestAnimationFrame","target","checkHoveredElementOnScroll","elementFromPoint","onScroll","onMouseOut","relatedTarget","passive","disconnect","remove","dispose"],"sourceRoot":""}