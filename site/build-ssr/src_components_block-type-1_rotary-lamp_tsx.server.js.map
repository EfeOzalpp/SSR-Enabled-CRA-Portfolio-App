{"version":3,"file":"src_components_block-type-1_rotary-lamp_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/block-type-1/rotary-lamp.tsx","webpack://personal-site/./src/styles/block-type-1.css"],"sourcesContent":["// RotaryLamp.tsx\r\nimport { useEffect, useState } from 'react';\r\nimport { getProjectData } from '../../utils/get-project-data';\r\nimport SplitDragHandler from '../../utils/split+drag/split-controller';\r\nimport PannableViewport from '../../utils/split+drag/pannable-object-position';\r\nimport MediaLoader from '../../utils/media-providers/media-loader';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\nimport '../../styles/block-type-1.css';\r\n\r\ntype MediaSlot = { alt?: string; image?: any; video?: { asset?: { url?: string } } };\r\ntype RotaryData = { mediaOne: MediaSlot; mediaTwo: MediaSlot };\r\n\r\nconst MIN_PORTRAIT_SPLIT = 16; // %\r\nconst EPS = 0.25; // small hysteresis for the snap zones\r\n\r\nexport default function RotaryLamp() {\r\n  const [data, setData] = useState<RotaryData | null>(null);\r\n  const [split, setSplit] = useState(() => (window.innerWidth < 768 ? 55 : 50));\r\n  const [isPortrait, setIsPortrait] = useState(window.innerHeight > window.innerWidth);\r\n\r\n  useTooltipInit();\r\n\r\n  useEffect(() => {\r\n    getProjectData<RotaryData>('rotary-lamp').then((d) => setData(d));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const onResize = () => setIsPortrait(window.innerHeight > window.innerWidth);\r\n    window.addEventListener('resize', onResize, { passive: true });\r\n    return () => window.removeEventListener('resize', onResize);\r\n  }, []);\r\n\r\n  if (!data) return null;\r\n\r\n  // swap media in landscape, keep original order in portrait\r\n  const media1 = isPortrait ? data.mediaOne : data.mediaTwo;\r\n  const media2 = isPortrait ? data.mediaTwo : data.mediaOne;\r\n\r\n  const TOP = MIN_PORTRAIT_SPLIT;\r\n  const BOTTOM = 100 - MIN_PORTRAIT_SPLIT;\r\n\r\n  const nearTop = isPortrait && split <= TOP + EPS;\r\n  const nearBottom = isPortrait && split >= BOTTOM - EPS;\r\n\r\n  return (\r\n    <section className=\"block-type-1\" id=\"no-ssr\" style={{ position: 'relative' }}>\r\n      {/* LEFT / TOP */}\r\n      <div\r\n        className=\"media-content-1\"\r\n        style={\r\n          isPortrait\r\n            ? nearTop\r\n              ? { height: '0%', width: '100%', position: 'absolute', top: 0, transition: 'height 0.1s ease' }\r\n              : nearBottom\r\n              ? { height: '100%', width: '100%', position: 'absolute', top: 0, transition: 'height 0.1s ease' }\r\n              : { height: `${split}%`, width: '100%', position: 'absolute', top: 0 }\r\n            : { width: `${split}%`, height: '100%', position: 'absolute', left: 0 }\r\n        }\r\n      >\r\n        <PannableViewport sensitivity={2}>\r\n          <MediaLoader\r\n            type=\"image\"\r\n            src={media1.image}\r\n            alt={media1.alt || 'Rotary Lamp media'}\r\n            id=\"rotary-media-1\"\r\n            className=\"media-item-1 tooltip-rotary-lamp\"\r\n            style={{ width: '100%', height: '100%' }}\r\n          />\r\n        </PannableViewport>\r\n      </div>\r\n\r\n      {/* Split handle â€” shares the same min so UX/DOM match */}\r\n      <SplitDragHandler split={split} setSplit={setSplit} />\r\n\r\n      {/* RIGHT / BOTTOM */}\r\n      <div\r\n        className=\"media-content-2\"\r\n        style={\r\n          isPortrait\r\n            ? nearTop\r\n              ? {\r\n                  height: '100%',\r\n                  width: '100%',\r\n                  position: 'absolute',\r\n                  top: '0%',\r\n                  transition: 'height 0.1s ease, top 0.1s ease',\r\n                }\r\n              : nearBottom\r\n              ? {\r\n                  height: '0%',\r\n                  width: '100%',\r\n                  position: 'absolute',\r\n                  top: '100%',\r\n                  transition: 'height 0.1s ease, top 0.1s ease',\r\n                }\r\n              : {\r\n                  height: `${100 - split}%`,\r\n                  width: '100%',\r\n                  position: 'absolute',\r\n                  top: `${split}%`,\r\n                }\r\n            : {\r\n                width: `${100 - split}%`,\r\n                height: '100%',\r\n                position: 'absolute',\r\n                left: `${split}%`,\r\n              }\r\n        }\r\n      >\r\n        <PannableViewport sensitivity={2}>\r\n          <MediaLoader\r\n            type={media2?.video?.asset?.url ? 'video' : 'image'}\r\n            src={media2?.video?.asset?.url || media2.image}\r\n            alt={media2.alt || 'Rotary Lamp media'}\r\n            id=\"rotary-media-2\"\r\n            className=\"media-item-2 tooltip-rotary-lamp\"\r\n            style={{ width: '100%', height: '100%' }}\r\n          />\r\n        </PannableViewport>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n",""],"names":["useEffect","useState","getProjectData","SplitDragHandler","PannableViewport","MediaLoader","useTooltipInit","jsx","_jsx","jsxs","_jsxs","MIN_PORTRAIT_SPLIT","EPS","RotaryLamp","data","setData","split","setSplit","window","innerWidth","isPortrait","setIsPortrait","innerHeight","then","d","onResize","addEventListener","passive","removeEventListener","media1","mediaOne","mediaTwo","media2","TOP","BOTTOM","nearTop","nearBottom","className","id","style","position","children","height","width","top","transition","left","sensitivity","type","src","image","alt","video","asset","url"],"sourceRoot":""}