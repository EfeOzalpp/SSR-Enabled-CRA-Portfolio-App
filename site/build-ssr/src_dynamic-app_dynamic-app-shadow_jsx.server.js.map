{"version":3,"file":"src_dynamic-app_dynamic-app-shadow_jsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/dynamic-app-outgoing.jsx","webpack://personal-site/./src/dynamic-app/dynamic-app-shadow.jsx","webpack://personal-site/./src/dynamic-app/lib/observedCard.jsx","webpack://personal-site/./src/dynamic-app/lib/shadowObserver.ts"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\r\nimport Navigation from './components/navigation';\r\nimport TitleDivider from './components/title';\r\nimport SortBy from './components/sortBy';\r\nimport FireworksDisplay from './components/fireworksDisplay';\r\nimport PauseButton from './components/pauseButton';\r\nimport Footer from './components/footer';\r\nimport ObservedCard from './lib/observedCard.jsx';\r\nimport setupAltObserver from './lib/setupAltObserver';\r\nimport IntroOverlay from './components/IntroOverlay';\r\nimport { colorMapping } from './lib/colorString';\r\nimport { useShadowRoot } from '../utils/context-providers/shadow-root-context';\r\nimport indexCss from '../styles/dynamic-app/index.css?raw';\r\nimport miscCss from '../styles/dynamic-app/misc.css?raw';\r\nimport overlayCss from '../styles/loading-overlay.css?raw';\r\n\r\n// shared preloader (no TS types in this file)\r\nimport {\r\n  getPreloadedDynamicApp,\r\n  whenDynamicPreloadReady,\r\n  ensureDynamicPreload,\r\n} from './preload-dynamic-app';\r\n\r\nfunction DynamicTheme({ onReady }) {\r\n  const [sortedImages, setSortedImages] = useState([]);\r\n  const [svgIcons, setSvgIcons] = useState({});\r\n  const [activeColor, setActiveColor] = useState('#FFFFFF');\r\n  const [movingTextColors, setMovingTextColors] = useState(['#FFFFFF', '#FFFFFF', '#FFFFFF']);\r\n  const [lastKnownColor, setLastKnownColor] = useState('#FFFFFF');\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [pauseAnimation, setPauseAnimation] = useState(false);\r\n  const [showNavigation, setShowNavigation] = useState(false);\r\n\r\n  const toggleFireworksRef = useRef(null);\r\n  const scrollContainerRef = useRef(null);\r\n  const shadowRef = useRef(null);\r\n\r\n  const [showFireworks, setShowFireworks] = useState(true);\r\n  const [isHostVisible, setIsHostVisible] = useState(false);\r\n  const hostVisibleRef = useRef(false);\r\n\r\n  const { getShadowRoot, injectStyle } = useShadowRoot();\r\n\r\n  useEffect(() => {\r\n    [indexCss, miscCss, overlayCss].forEach(injectStyle);\r\n  }, [injectStyle]);\r\n\r\n  // signal ready on first paint (wrapper de-dupes)\r\n  useEffect(() => {\r\n    const id = requestAnimationFrame(() => { try { onReady?.(); } catch {} });\r\n    return () => cancelAnimationFrame(id);\r\n  }, [onReady]);\r\n\r\n  // Prime from cache, then wait for preload (deduped)\r\n  useEffect(() => {\r\n    const snap = getPreloadedDynamicApp();\r\n    if (snap.icons) setSvgIcons(snap.icons);\r\n    if (Array.isArray(snap.images)) setSortedImages(snap.images);\r\n\r\n    let cancelled = false;\r\n    ensureDynamicPreload()\r\n      .catch(() => whenDynamicPreloadReady())\r\n      .then((cache) => {\r\n        if (cancelled || !cache) return;\r\n        if (cache.icons) setSvgIcons(cache.icons);\r\n        if (Array.isArray(cache.images)) setSortedImages(cache.images);\r\n        setIsLoading(false);\r\n        setShowNavigation(true);\r\n      })\r\n      .catch(() => {\r\n        if (!cancelled) setIsLoading(false);\r\n      });\r\n\r\n    return () => { cancelled = true; };\r\n  }, []);\r\n\r\n  const observerRoot = useRef(null);\r\n  useEffect(() => {\r\n    const root = typeof getShadowRoot === 'function' ? getShadowRoot() : document;\r\n    observerRoot.current = root;\r\n  }, [getShadowRoot]);\r\n\r\n  const handleActivate = useCallback((alt1) => {\r\n    const colors = colorMapping?.[alt1];\r\n    if (colors && colors[0] !== activeColor) {\r\n      setActiveColor(colors[2]);\r\n      setMovingTextColors([colors[0], colors[1], colors[3]]);\r\n      setLastKnownColor(colors[2]);\r\n    }\r\n  }, [activeColor]);\r\n\r\n  const handleDeactivate = useCallback(() => {\r\n    if (activeColor !== lastKnownColor) setActiveColor(lastKnownColor);\r\n  }, [activeColor, lastKnownColor]);\r\n\r\n  const currentAltRef = useRef(null);\r\n  useEffect(() => {\r\n    if (isLoading || sortedImages.length === 0) return;\r\n    const root = observerRoot.current;\r\n    if (!root) return;\r\n\r\n    const guardedActivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;\r\n      if (currentAltRef.current === alt1) return;\r\n      currentAltRef.current = alt1;\r\n      handleActivate(alt1);\r\n    };\r\n\r\n    const guardedDeactivate = (alt1) => {\r\n      if (!hostVisibleRef.current) return;\r\n      if (currentAltRef.current !== alt1) return;\r\n      handleDeactivate(alt1);\r\n    };\r\n\r\n    const cleanup = setupAltObserver(guardedActivate, guardedDeactivate, root);\r\n    return typeof cleanup === 'function' ? cleanup : undefined;\r\n  }, [isLoading, sortedImages, handleActivate, handleDeactivate]);\r\n\r\n  const handleSetToggleFireworks = useCallback((fn) => {\r\n    toggleFireworksRef.current = fn;\r\n  }, []);\r\n\r\n  const handlePauseToggle = useCallback((isEnabled) => {\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(isEnabled);\r\n    setPauseAnimation(!isEnabled);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (!shadowRef.current) return;\r\n    const ro = new ResizeObserver(() => {\r\n      console.log('[Resize observed]', shadowRef.current?.getBoundingClientRect());\r\n    });\r\n    ro.observe(shadowRef.current);\r\n    return () => ro.disconnect();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const container = document.querySelector('#block-dynamic');\r\n    if (!container) {\r\n      console.warn('[FireworkObserver] #block-dynamic not found in DOM');\r\n      return;\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const visible = !!entry.isIntersecting;\r\n        hostVisibleRef.current = visible;\r\n        setIsHostVisible(visible);\r\n\r\n        const desired = visible && !pauseAnimation;\r\n        setShowFireworks((prev) => (prev !== desired ? desired : prev));\r\n        if (toggleFireworksRef.current) toggleFireworksRef.current(desired);\r\n      },\r\n      { threshold: 0.3 }\r\n    );\r\n\r\n    io.observe(container);\r\n\r\n    // prime immediately\r\n    const rect = container.getBoundingClientRect();\r\n    const visibleNow = rect.top < window.innerHeight && rect.bottom > 0;\r\n    hostVisibleRef.current = visibleNow;\r\n    setIsHostVisible(visibleNow);\r\n\r\n    const initialDesired = visibleNow && !pauseAnimation;\r\n    setShowFireworks((prev) => (prev !== initialDesired ? initialDesired : prev));\r\n    if (toggleFireworksRef.current) toggleFireworksRef.current(initialDesired);\r\n\r\n    return () => io.disconnect();\r\n  }, [pauseAnimation]);\r\n\r\n  useEffect(() => {\r\n    if (toggleFireworksRef.current) {\r\n      toggleFireworksRef.current(!pauseAnimation && isHostVisible);\r\n    }\r\n  }, [pauseAnimation, isHostVisible]);\r\n\r\n  const cardRefs = useRef([]);\r\n  cardRefs.current = sortedImages.map((_, i) => cardRefs.current[i] ?? React.createRef());\r\n\r\n  return (\r\n    <div className=\"homePage-container\" ref={scrollContainerRef} aria-busy={isLoading ? 'true' : 'false'}>\r\n      <IntroOverlay />\r\n\r\n      <div className=\"navigation-wrapper\">\r\n        {showNavigation && (\r\n          <Navigation\r\n            customArrowIcon2={svgIcons['arrow1']}\r\n            customArrowIcon={svgIcons['arrow2']}\r\n            items={sortedImages}\r\n            activeColor={activeColor}\r\n            isInShadow={typeof getShadowRoot === 'function' && getShadowRoot() !== document}\r\n            scrollLockContainer={scrollContainerRef.current}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"firework-wrapper\">\r\n        <div className=\"firework-divider\">\r\n          {showFireworks && (\r\n            <FireworksDisplay\r\n              colorMapping={colorMapping}\r\n              items={sortedImages}\r\n              activeColor={activeColor}\r\n              lastKnownColor={lastKnownColor}\r\n              onToggleFireworks={handleSetToggleFireworks}\r\n            />\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"section-divider\"></div>\r\n\r\n      <div className=\"title-divider\">\r\n        <TitleDivider\r\n          svgIcon={svgIcons['logo-small-1']}\r\n          movingTextColors={movingTextColors}\r\n          pauseAnimation={pauseAnimation}\r\n        />\r\n      </div>\r\n\r\n      <div id=\"homePage\">\r\n        <div className=\"no-overflow\">\r\n          <div className=\"pause-button-wrapper\">\r\n            <PauseButton toggleP5Animation={handlePauseToggle} />\r\n          </div>\r\n\r\n          <div className=\"sort-by-divider\">\r\n            <h3 className=\"students-heading\">Students</h3>\r\n            <SortBy\r\n              setSortOption={() => {}}\r\n              onFetchItems={setSortedImages}\r\n              customArrowIcon={svgIcons['arrow2']}\r\n              colorMapping={colorMapping}\r\n              getRoot={getShadowRoot}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"section-divider2\"></div>\r\n\r\n          <div className=\"UI-card-divider\">\r\n            {sortedImages.map((data, index) => (\r\n              <ObservedCard\r\n                key={index}\r\n                data={data}\r\n                index={index}\r\n                getShadowRoot={getShadowRoot}\r\n                pauseAnimation={pauseAnimation}\r\n                customArrowIcon2={svgIcons['arrow1']}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          <Footer\r\n            customArrowIcon2={svgIcons['arrow1']}\r\n            linkArrowIcon={svgIcons['link-icon']}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DynamicTheme;\r\n","// dynamic app shadow DOM wrapper\r\nimport React, { useRef, useEffect, useState } from 'react';\r\nimport createShadowRoot from 'react-shadow';\r\nimport DynamicTheme from './dynamic-app-outgoing.jsx';\r\nimport { ShadowRootProvider } from '../utils/context-providers/shadow-root-context.tsx';\r\n\r\nconst DynamicAppInbound = ({ onFocusChange, onReady }) => {\r\n  const shadowRef = useRef(null);\r\n  const [shadowRoot, setShadowRoot] = useState(null);\r\n  const ShadowRoot = createShadowRoot.div;\r\n\r\n  // ensure we only ever signal ready once\r\n  const readySentRef = useRef(false);\r\n  const sendReady = () => {\r\n    if (readySentRef.current) return;\r\n    readySentRef.current = true;\r\n    try { onReady?.(); } catch {}\r\n  };\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      const root = shadowRef.current?.getRootNode?.();\r\n      if (root && root.host) {\r\n        setShadowRoot(root);\r\n        // first visual frame -> tell enhancer we’re ready\r\n        requestAnimationFrame(sendReady);\r\n      } else {\r\n        console.warn('[Not a ShadowRoot]', root);\r\n      }\r\n    }, 0);\r\n    return () => clearTimeout(t);\r\n  }, [onReady]); // safe for HMR\r\n\r\n  useEffect(() => {\r\n    const el = shadowRef.current;\r\n    if (!el) return;\r\n\r\n    let startY = 0;\r\n    let focusTriggered = false;\r\n\r\n    const triggerSyntheticClick = () => {\r\n      const down = new PointerEvent('pointerdown', {\r\n        bubbles: true, cancelable: true, composed: true, pointerType: 'touch',\r\n      });\r\n      el.dispatchEvent(down);\r\n      onFocusChange?.(true);\r\n      console.log('[Focus triggered in embedded app]');\r\n    };\r\n\r\n    const handleTouchStart = (e) => {\r\n      if (e.touches.length === 0) return;\r\n      startY = e.touches[0].clientY;\r\n      focusTriggered = false;\r\n    };\r\n\r\n    const handleTouchMove = (e) => {\r\n      if (focusTriggered || e.touches.length === 0) return;\r\n      const deltaY = e.touches[0].clientY - startY;\r\n      if (Math.abs(deltaY) > 1) {\r\n        el.scrollTop += 1;\r\n        triggerSyntheticClick();\r\n        focusTriggered = true;\r\n      }\r\n    };\r\n\r\n    if ('ontouchstart' in window) {\r\n      el.addEventListener('touchstart', handleTouchStart, { passive: true });\r\n      el.addEventListener('touchmove', handleTouchMove, { passive: true });\r\n    }\r\n    return () => {\r\n      el.removeEventListener('touchstart', handleTouchStart);\r\n      el.removeEventListener('touchmove', handleTouchMove);\r\n    };\r\n  }, [onFocusChange]);\r\n\r\n  return (\r\n    <div className=\"embedded-app\">\r\n      <ShadowRoot>\r\n        <div ref={shadowRef} className=\"dynamic-app\" id=\"shadow-dynamic-app\">\r\n          {shadowRoot ? (\r\n            <ShadowRootProvider getShadowRoot={() => shadowRoot}>\r\n              {/* pass the guarded ready down so either level can signal */}\r\n              <DynamicTheme onReady={sendReady} />\r\n            </ShadowRootProvider>\r\n          ) : null}\r\n        </div> \r\n      </ShadowRoot>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DynamicAppInbound;\r\n","// src/dynamic-app/lib/observedCard.jsx\r\nimport React, { useRef } from 'react';\r\nimport UIcards from '../components/homepage-UIcards';\r\nimport useIntersectionTransform from './shadowObserver';\r\n\r\nfunction ObservedCard({\r\n  data,\r\n  index,\r\n  getShadowRoot,\r\n  pauseAnimation,\r\n  customArrowIcon2,\r\n}) {\r\n  const ref = useRef(null);\r\n\r\n  // The hook will accept whatever you pass — no TS constraint here\r\n  useIntersectionTransform(ref, getShadowRoot, pauseAnimation);\r\n\r\n  return (\r\n    <div ref={ref} className={`custom-card-${index}`}>\r\n      <UIcards\r\n        title={data.title}\r\n        backgroundColor={data.backgroundColor}\r\n        image1={data.image1}\r\n        image2={data.image2}\r\n        alt1={data.alt1}\r\n        alt2={data.alt2}\r\n        url1={data.url1}\r\n        className={`custom-card-${index}`}\r\n        customArrowIcon2={customArrowIcon2}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ObservedCard;\r\n","// useIntersectionTransform.ts\r\nimport { useEffect } from 'react';\r\n\r\nexport default function useIntersectionTransform(\r\n  ref: React.RefObject<HTMLElement>,\r\n  getShadowRoot: () => ShadowRoot | null,\r\n  pauseAnimation: boolean,\r\n  getScrollRoot?: () => Element | null  // 👈 NEW\r\n) {\r\n\r\n  useEffect(() => {\r\n    if (!ref.current || pauseAnimation) return;\r\n\r\n    // Figure out where we live (shadow/dom) and what to use as IO root.\r\n    const shadow = getShadowRoot?.() ?? null;\r\n    const isInShadow = !!shadow;\r\n    const containerEl =\r\n      (typeof getScrollRoot === 'function' && getScrollRoot()) ||\r\n      // prefer your inner scroller if we can find it:\r\n      (isInShadow ? shadow.querySelector('.embedded-app') as Element | null : null) ||\r\n      null; // fallback = viewport\r\n\r\n    // (optional) gate transforms to when pointer is inside shadow host\r\n    let mouseInside = false;\r\n    const hostEl = isInShadow ? (shadow as ShadowRoot).host as HTMLElement : null;\r\n    const onEnter = () => (mouseInside = true);\r\n    const onLeave = () => (mouseInside = false);\r\n    if (hostEl) {\r\n      hostEl.addEventListener('pointerenter', onEnter);\r\n      hostEl.addEventListener('pointerleave', onLeave);\r\n    }\r\n\r\n    const cardEl = ref.current!;\r\n    const imageContainer  = cardEl.querySelector('.image-container')  as HTMLElement | null;\r\n    const imageContainer2 = cardEl.querySelector('.image-container2') as HTMLElement | null;\r\n    if (!imageContainer || !imageContainer2) return;\r\n\r\n    const applyTransform = (percentage: number) => {\r\n      const width =\r\n        containerEl instanceof Element\r\n          ? (containerEl as HTMLElement).clientWidth\r\n          : window.innerWidth;\r\n\r\n      let imageContainerTransform = 'translate(0em, 0em)';\r\n      let imageContainer2Transform = 'translate(1em, -28em)';\r\n      let imageContainerZIndex = '5';\r\n      let imageContainer2ZIndex = '1';\r\n\r\n      if (width <= 767) {\r\n        if (percentage > 0.35 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0.5em, 1em)';\r\n          imageContainer2Transform = 'translate(0.5em, -32.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.15 && percentage <= 0.35) {\r\n          imageContainerTransform = 'translate(1.5em, 0.5em)';\r\n          imageContainer2Transform = 'translate(-0.25em, -34.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.15) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -33.5em)';\r\n        }\r\n      } else if (width <= 1024) {\r\n        if (percentage >= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(0em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.3) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage < 0.1) {\r\n          imageContainerTransform = 'translate(-0.5em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -23.5em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else if (width > 1025) {\r\n        if (percentage > 0.6 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(1em, 1em)';\r\n          imageContainer2Transform = 'translate(0em, -28.8em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage > 0.3 && percentage <= 0.6) {\r\n          imageContainerTransform = 'translate(1.2em, -0.8em)';\r\n          imageContainer2Transform = 'translate(0em, -28em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -27.4em)';\r\n          imageContainerZIndex = '5';\r\n          imageContainer2ZIndex = '1';\r\n        }\r\n      } else {\r\n        if (percentage > 0.3 && percentage <= 1) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n          imageContainerZIndex = '1';\r\n          imageContainer2ZIndex = '5';\r\n        } else if (percentage >= 0 && percentage <= 0.3) {\r\n          imageContainerTransform = 'translate(0em, 0em)';\r\n          imageContainer2Transform = 'translate(1em, -43em)';\r\n        }\r\n      }\r\n\r\n      imageContainer.style.transform = imageContainerTransform;\r\n      imageContainer.style.zIndex = imageContainerZIndex;\r\n      imageContainer2.style.transform = imageContainer2Transform;\r\n      imageContainer2.style.zIndex = imageContainer2ZIndex;\r\n    };\r\n\r\n    // IO now uses the scroll container as root (if available)\r\n    const observer = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (isInShadow && !mouseInside) return;\r\n\r\n        const rect = entry.boundingClientRect;\r\n\r\n        // use the container’s rect/height instead of window\r\n        const rootRect = containerEl\r\n          ? (containerEl as Element).getBoundingClientRect()\r\n          : document.documentElement.getBoundingClientRect();\r\n\r\n        const rootHeight =\r\n          containerEl instanceof Element\r\n            ? (containerEl as HTMLElement).clientHeight\r\n            : window.innerHeight;\r\n\r\n        const rootCenter = rootRect.top + rootHeight;\r\n\r\n        // replicate your old math but relative to the container center\r\n        const percentage = Math.max(\r\n          0,\r\n          Math.min(rect.height, rootCenter - rect.top)\r\n        ) / rect.height;\r\n\r\n        applyTransform(percentage);\r\n      },\r\n      {\r\n        root: containerEl || null, // ← critical change\r\n        threshold: Array.from({ length: 101 }, (_, i) => i / 100),\r\n      }\r\n    );\r\n\r\n    // initial position apply (also relative to container)\r\n    const rect = cardEl.getBoundingClientRect();\r\n    const rootRect = containerEl\r\n      ? (containerEl as Element).getBoundingClientRect()\r\n      : document.documentElement.getBoundingClientRect();\r\n    const rootHeight =\r\n      containerEl instanceof Element\r\n        ? (containerEl as HTMLElement).clientHeight\r\n        : window.innerHeight;\r\n    const rootCenter = rootRect.top + rootHeight / 1.5;\r\n    const initialPct = Math.max(0, Math.min(rect.height, rootCenter - rect.top)) / rect.height;\r\n    applyTransform(initialPct);\r\n\r\n    observer.observe(cardEl);\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      if (hostEl) {\r\n        hostEl.removeEventListener('pointerenter', onEnter);\r\n        hostEl.removeEventListener('pointerleave', onLeave);\r\n      }\r\n    };\r\n  }, [ref, pauseAnimation, getShadowRoot, getScrollRoot]);\r\n}\r\n"],"names":["React","useState","useEffect","useCallback","useRef","Navigation","TitleDivider","SortBy","FireworksDisplay","PauseButton","Footer","ObservedCard","setupAltObserver","IntroOverlay","colorMapping","useShadowRoot","indexCss","miscCss","overlayCss","getPreloadedDynamicApp","whenDynamicPreloadReady","ensureDynamicPreload","jsx","_jsx","jsxs","_jsxs","DynamicTheme","onReady","sortedImages","setSortedImages","svgIcons","setSvgIcons","activeColor","setActiveColor","movingTextColors","setMovingTextColors","lastKnownColor","setLastKnownColor","isLoading","setIsLoading","pauseAnimation","setPauseAnimation","showNavigation","setShowNavigation","toggleFireworksRef","scrollContainerRef","shadowRef","showFireworks","setShowFireworks","isHostVisible","setIsHostVisible","hostVisibleRef","getShadowRoot","injectStyle","forEach","id","requestAnimationFrame","cancelAnimationFrame","snap","icons","Array","isArray","images","cancelled","catch","then","cache","observerRoot","root","document","current","handleActivate","alt1","colors","handleDeactivate","currentAltRef","length","guardedActivate","guardedDeactivate","cleanup","undefined","handleSetToggleFireworks","fn","handlePauseToggle","isEnabled","ro","ResizeObserver","console","log","getBoundingClientRect","observe","disconnect","container","querySelector","warn","io","IntersectionObserver","entry","visible","isIntersecting","desired","prev","threshold","rect","visibleNow","top","window","innerHeight","bottom","initialDesired","cardRefs","map","_","i","createRef","className","ref","children","customArrowIcon2","customArrowIcon","items","isInShadow","scrollLockContainer","onToggleFireworks","svgIcon","toggleP5Animation","setSortOption","onFetchItems","getRoot","data","index","linkArrowIcon","createShadowRoot","ShadowRootProvider","DynamicAppInbound","onFocusChange","shadowRoot","setShadowRoot","ShadowRoot","div","readySentRef","sendReady","t","setTimeout","getRootNode","host","clearTimeout","el","startY","focusTriggered","triggerSyntheticClick","down","PointerEvent","bubbles","cancelable","composed","pointerType","dispatchEvent","handleTouchStart","e","touches","clientY","handleTouchMove","deltaY","Math","abs","scrollTop","addEventListener","passive","removeEventListener","UIcards","useIntersectionTransform","title","backgroundColor","image1","image2","alt2","url1","getScrollRoot","shadow","containerEl","mouseInside","hostEl","onEnter","onLeave","cardEl","imageContainer","imageContainer2","applyTransform","percentage","width","Element","clientWidth","innerWidth","imageContainerTransform","imageContainer2Transform","imageContainerZIndex","imageContainer2ZIndex","style","transform","zIndex","observer","boundingClientRect","rootRect","documentElement","rootHeight","clientHeight","rootCenter","max","min","height","from","initialPct"],"sourceRoot":""}