{"version":3,"file":"components.server.js","mappings":"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","sources":["webpack://personal-site/./src/components/rock-escapade/block-g-coin-counter.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-exit.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-game-over.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-host.tsx","webpack://personal-site/./src/components/rock-escapade/block-g-onboarding.tsx","webpack://personal-site/./src/components/rock-escapade/subscribeHighScore.ts","webpack://personal-site/./src/components/rock-escapade/updateHighScore.ts","webpack://personal-site/./src/utils/content-utility/color-map.ts","webpack://personal-site/./src/utils/content-utility/lazy-view-mount.tsx","webpack://personal-site/./src/utils/content-utility/real-mobile.ts","webpack://personal-site/./src/utils/context-providers/project-context.tsx","webpack://personal-site/./src/utils/tooltip/tooltip.ts","webpack://personal-site/./src/utils/tooltip/tooltipInit.ts"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport lottie, { type AnimationItem, type AnimationSegment } from 'lottie-web';\r\nimport coin from '../../svg/coin.json';\r\n\r\ninterface CoinCounterProps {\r\n  coins: number;\r\n  highScore: number;\r\n  newHighScore: boolean;\r\n}\r\n\r\nconst CoinCounter: React.FC<CoinCounterProps> = ({ coins, highScore, newHighScore }) => {\r\n  const coinRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (!coinRef.current) return;\r\n\r\n    const anim: AnimationItem = lottie.loadAnimation({\r\n      container: coinRef.current,\r\n      renderer: 'svg',\r\n      loop: false,          // we'll loop manually with segments\r\n      autoplay: false,\r\n      animationData: coin,\r\n    });\r\n\r\n    const onDomLoaded = () => {\r\n      const svg = coinRef.current?.querySelector('svg');\r\n      if (svg) svg.classList.add('coin-lottie');\r\n\r\n      // start the loop once we know totalFrames\r\n      const total = anim.totalFrames;\r\n      const segment: AnimationSegment = [41, total - 1];\r\n\r\n      const loopOnce = () => anim.playSegments(segment, true);\r\n      const onComplete = () => loopOnce();\r\n\r\n      // kick it off and keep looping\r\n      loopOnce();\r\n      anim.addEventListener('complete', onComplete);\r\n\r\n      // store cleanup that knows this handler\r\n      cleanupHandlers.complete = () => anim.removeEventListener('complete', onComplete);\r\n    };\r\n\r\n    // attach, and keep a way to remove it on unmount\r\n    anim.addEventListener('DOMLoaded', onDomLoaded);\r\n\r\n    const cleanupHandlers: { complete?: () => void } = {};\r\n\r\n    return () => {\r\n      cleanupHandlers.complete?.();\r\n      anim.removeEventListener('DOMLoaded', onDomLoaded);\r\n      anim.destroy();\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <div className=\"coin-counter\">\r\n      <div className=\"coin-count\">\r\n        <div className=\"coin2\" ref={coinRef} />\r\n        <h3 className=\"coin-amount\">{coins}</h3>\r\n      </div>\r\n      <h3\r\n        className=\"high-score\"\r\n        style={{ background: newHighScore ? '#f6c44b38' : '#514068bd' }}\r\n      >\r\n        {newHighScore ? 'New High Score: ' : 'High Score: '}\r\n        {highScore}\r\n      </h3>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CoinCounter;\r\n","import React, { useState, useEffect } from 'react';\r\n\r\nconst ExitButton = ({ onExit }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    if (onExit) onExit();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const timeout = setTimeout(() => {\r\n        setVisible(false);\r\n      }, 300); // Match CSS transition duration\r\n\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div className=\"block-g-exit\"\r\n      onClick={handleClick}\r\n      style={{\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease'\r\n    }} ><h4> Exit </h4> </div>\r\n  );\r\n};\r\n\r\nexport default ExitButton;\r\n","// src/components/rock-escapade/block-g-game-over.tsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport gameOver from '../../svg/gameover.json';\r\nimport highScore from '../../svg/highscore.json';\r\n\r\ntype Props = {\r\n  onRestart?: () => void;\r\n  visibleTrigger?: number | boolean;\r\n  coins: number;\r\n  newHighScore: boolean;\r\n};\r\n\r\nconst BlockGGameOver: React.FC<Props> = ({ onRestart, visibleTrigger, coins, newHighScore }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n  const lottieRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  const handleClick = () => {\r\n    onRestart?.();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  // fade-out -> unmount\r\n  useEffect(() => {\r\n    if (!isFadingOut) return;\r\n    const t = setTimeout(() => setVisible(false), 300);\r\n    return () => clearTimeout(t);\r\n  }, [isFadingOut]);\r\n\r\n  // external trigger to re-show\r\n  useEffect(() => {\r\n    if (visibleTrigger) {\r\n      setVisible(true);\r\n      setIsFadingOut(false);\r\n    }\r\n  }, [visibleTrigger]);\r\n\r\n  // disable background scroll while visible\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n\r\n    const prevent = (e: Event) => e.preventDefault();\r\n\r\n    window.addEventListener('wheel', prevent, { passive: false });\r\n    window.addEventListener('touchmove', prevent, { passive: false });\r\n    window.addEventListener('keydown', prevent as any, { passive: false });\r\n\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n\r\n    return () => {\r\n      window.removeEventListener('wheel', prevent as any);\r\n      window.removeEventListener('touchmove', prevent as any);\r\n      window.removeEventListener('keydown', prevent as any);\r\n      document.body.style.overflow = prev;\r\n    };\r\n  }, [visible]);\r\n\r\n  // lottie\r\n  useEffect(() => {\r\n    if (!lottieRef.current) return;\r\n    const anim = lottie.loadAnimation({\r\n      container: lottieRef.current,\r\n      renderer: 'svg',\r\n      loop: newHighScore ? true : false,\r\n      autoplay: true,\r\n      animationData: newHighScore ? highScore : gameOver,\r\n    });\r\n    return () => anim.destroy();\r\n  }, [newHighScore]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    // OPAQUE, FULL-SCREEN BACKDROP (covers canvas completely)\r\n    <div\r\n      className=\"gameover-overlay\"\r\n      role=\"dialog\"\r\n      aria-modal=\"true\"\r\n      onClick={handleClick}\r\n      style={{\r\n        position: 'fixed',\r\n        inset: 0,\r\n        width: '100vw',\r\n        height: '100vh',\r\n        background: '#000',                \r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease',\r\n        cursor: 'pointer',\r\n      }}\r\n    >\r\n      {/* Keep your existing class for inner layout/typography */}\r\n      <div className=\"block-g-gameover\" style={{ position: 'relative', background: 'transparent' }}>\r\n        <div ref={lottieRef} className=\"gameover-lottie\" />\r\n        <div className=\"gameover-text-area\">\r\n          <h1\r\n            className=\"gameover-text\"\r\n            style={{ color: newHighScore ? 'rgb(255 230 203)' : 'rgb(222 202 250)' }}\r\n          >\r\n            {newHighScore ? 'New High Score!' : 'Game Over'}\r\n          </h1>\r\n\r\n          <div style={{ margin: '8px 0' }}>—</div>\r\n\r\n          <div className=\"gameover-coin-count\">\r\n            <h2 style={{ color: 'rgb(255, 205, 55)' }}>{coins} Coins Collected</h2>\r\n          </div>\r\n\r\n          <h4 className=\"gameover-cta\">Click to Play Again</h4>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockGGameOver;\r\n","// src/components/rock-escapade/BlockGHost.tsx\r\nimport { useCallback, useEffect, useRef, useState } from 'react';\r\nimport lottie from 'lottie-web';\r\n\r\nimport BlockGOnboarding from './block-g-onboarding';\r\nimport BlockGGameOver from './block-g-game-over';\r\nimport CoinCounter from './block-g-coin-counter';\r\nimport ExitButton from './block-g-exit';\r\n\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile';\r\nimport desktopOnboarding from '../../svg/desktop-onboarding.json';\r\nimport mobileOnboarding from '../../svg/mobile-onboarding.json';\r\n\r\nimport LazyViewMount from '../../utils/content-utility/lazy-view-mount';\r\nimport { gameLoaders } from '../../utils/content-utility/component-loader';\r\nimport { useHighScoreSubscription } from './subscribeHighScore';\r\nimport { updateHighScore } from './updateHighScore';\r\n\r\nimport '../../styles/block-type-g.css';\r\n\r\n// --- Game mode helpers\r\nconst GAME_MODE_CLASS = 'game-mode-active';\r\nfunction activateGameMode() { if (typeof document !== 'undefined') document.body.classList.add(GAME_MODE_CLASS); }\r\nfunction deactivateGameMode() { if (typeof document !== 'undefined') document.body.classList.remove(GAME_MODE_CLASS); }\r\nfunction isFullscreen() { return typeof document !== 'undefined' && !!document.fullscreenElement; }\r\n\r\nexport default function BlockGHost({ blockId }: { blockId: string }) {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  // lifecycle\r\n  const [started, setStarted] = useState(false);\r\n  const [fakeFS, setFakeFS] = useState(false);\r\n\r\n  // HUD + meta\r\n  const [coins, setCoins] = useState(0);\r\n  const [gameOverVisible, setGameOverVisible] = useState(false);\r\n  const [newHighScore, setNewHighScore] = useState(false);\r\n\r\n  // High score from Sanity only (single source of truth)\r\n  const remoteHighScore = useHighScoreSubscription();\r\n  const stableHigh = typeof remoteHighScore === 'number' ? remoteHighScore : 0;\r\n\r\n  // onboarding overlay state\r\n  const [countdownPhase, setCountdownPhase] = useState<null | 'lottie' | 'begin'>(null);\r\n  const [showBeginText, setShowBeginText] = useState(false);\r\n  const [showOverlayBg, setShowOverlayBg] = useState(false);\r\n  const [shouldRenderOverlayBg, setShouldRenderOverlayBg] = useState(false);\r\n  const lottieRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  // API from GameCanvas (restart)\r\n  const restartApi = useRef<{ restart: () => void } | null>(null);\r\n\r\n  // --- Fullscreen\r\n  const enterFullscreen = useCallback(async () => {\r\n    if (typeof document === 'undefined') return;\r\n    const el = document.getElementById(blockId);\r\n    if (!el) return;\r\n\r\n    const req =\r\n      (el as any).requestFullscreen ||\r\n      (el as any).webkitRequestFullscreen ||\r\n      (el as any).msRequestFullscreen ||\r\n      (el as any).mozRequestFullScreen;\r\n\r\n    try {\r\n      const p = req?.call(el);\r\n      if (p?.then) await p;\r\n      setFakeFS(false);\r\n    } catch {\r\n      setFakeFS(true); // CSS fallback for iOS etc.\r\n    }\r\n  }, [blockId]);\r\n\r\n  const onStart = useCallback(async () => {\r\n    void gameLoaders.game(); // prefetch canvas chunk immediately\r\n    await enterFullscreen();\r\n    activateGameMode();\r\n    setStarted(true);\r\n    setCoins(0);\r\n    setCountdownPhase('lottie');\r\n\r\n    requestAnimationFrame(() => {\r\n      const el = document.getElementById(blockId);\r\n      (el as HTMLElement | null)?.focus?.();\r\n    });\r\n  }, [enterFullscreen, blockId]);\r\n\r\n  // Global key guard (prevent page scroll)\r\n  useEffect(() => {\r\n    if (!started) return;\r\n\r\n    const gameRoot = document.getElementById(blockId);\r\n    const preventScrollKeys = (e: KeyboardEvent) => {\r\n      if (!document.body.classList.contains(GAME_MODE_CLASS)) return;\r\n\r\n      const t = e.target as HTMLElement | null;\r\n      const tag = t?.tagName;\r\n      if (tag && /INPUT|TEXTAREA|SELECT/.test(tag)) return;\r\n\r\n      if (gameRoot && t && gameRoot.contains(t)) return;\r\n\r\n      const k = e.key;\r\n      if (\r\n        k === ' ' || k === 'Spacebar' ||\r\n        k === 'ArrowUp' || k === 'ArrowDown' ||\r\n        k === 'ArrowLeft' || k === 'ArrowRight' ||\r\n        k === 'PageUp' || k === 'PageDown' ||\r\n        k === 'Home' || k === 'End'\r\n      ) e.preventDefault();\r\n    };\r\n\r\n    window.addEventListener('keydown', preventScrollKeys);\r\n    return () => window.removeEventListener('keydown', preventScrollKeys);\r\n  }, [started, blockId]);\r\n\r\n  // Scroll lock while started (real or fake FS)\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n    if (!started && !fakeFS) return;\r\n    const prev = document.body.style.overflow;\r\n    document.body.style.overflow = 'hidden';\r\n    return () => { document.body.style.overflow = prev; };\r\n  }, [started, fakeFS]);\r\n\r\n  // Countdown Lottie -> BEGIN! -> hide\r\n  useEffect(() => {\r\n    if (countdownPhase !== 'lottie' || !lottieRef.current) return;\r\n    const anim = lottie.loadAnimation({\r\n      container: lottieRef.current,\r\n      renderer: 'svg',\r\n      loop: false,\r\n      autoplay: true,\r\n      animationData: isRealMobile ? mobileOnboarding : desktopOnboarding,\r\n    });\r\n    const onComplete = () => setCountdownPhase('begin');\r\n    anim.addEventListener('complete', onComplete);\r\n    return () => { anim.removeEventListener('complete', onComplete); anim.destroy(); };\r\n  }, [countdownPhase, isRealMobile]);\r\n\r\n  useEffect(() => {\r\n    if (countdownPhase === 'begin') {\r\n      setShowBeginText(true);\r\n      const t = setTimeout(() => {\r\n        setShowBeginText(false);\r\n        setCountdownPhase(null);\r\n      }, 1000);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [countdownPhase]);\r\n\r\n  useEffect(() => {\r\n    if (countdownPhase === 'lottie') {\r\n      setShowOverlayBg(true);\r\n      setShouldRenderOverlayBg(true);\r\n    } else if (countdownPhase === null) {\r\n      setShowOverlayBg(false);\r\n      const t = setTimeout(() => setShouldRenderOverlayBg(false), 400);\r\n      return () => clearTimeout(t);\r\n    }\r\n  }, [countdownPhase]);\r\n\r\n  // GameCanvas callbacks\r\n  const handleReady = (api: { restart: () => void }) => { restartApi.current = api; };\r\n\r\n  const handleCoinsChange = (n: number) => {\r\n    setCoins(n);\r\n    // styling hint while current run is beating the remote value\r\n    setNewHighScore(n > stableHigh);\r\n  };\r\n\r\n  const handleGameOver = (finalCoins: number, isNewHigh: boolean) => {\r\n    setGameOverVisible(true);\r\n    setNewHighScore(isNewHigh);\r\n\r\n    if (isNewHigh) {\r\n      // Only update Sanity; UI will reflect via subscription\r\n      updateHighScore(finalCoins).catch((e) =>\r\n        console.error('[HS] Remote update error:', e)\r\n      );\r\n    }\r\n  };\r\n\r\n  const handleRestart = () => {\r\n    setGameOverVisible(false);\r\n    setNewHighScore(false);\r\n    setCountdownPhase(null);\r\n    restartApi.current?.restart();\r\n    setCoins(0);\r\n  };\r\n\r\n  const handleExit = () => {\r\n    setStarted(false);\r\n    setGameOverVisible(false);\r\n    setNewHighScore(false);\r\n    setCountdownPhase(null);\r\n    setCoins(0);\r\n\r\n    deactivateGameMode();\r\n    if (isFullscreen()) {\r\n      const exit =\r\n        (document as any).exitFullscreen ||\r\n        (document as any).webkitExitFullscreen ||\r\n        (document as any).msExitFullscreen ||\r\n        (document as any).mozCancelFullScreen;\r\n      try { exit?.call(document); } catch {}\r\n    }\r\n  };\r\n\r\n  useEffect(() => () => deactivateGameMode(), []);\r\n\r\n  // For display: if you’re beating the high, show the current coins next to “New High Score”\r\n  const displayHigh = newHighScore ? coins : stableHigh;\r\n\r\n  return (\r\n    <section\r\n      id={blockId}\r\n      tabIndex={-1}\r\n      className={`block-type-g ${fakeFS ? 'fake-fs' : ''} ${started ? 'ingame' : ''}`}\r\n      style={{ position: 'relative' }}\r\n    >\r\n      {/* Onboarding UI */}\r\n      {!started && (\r\n        <BlockGOnboarding onStart={onStart} resetTrigger={started ? 1 : 0} />\r\n      )}\r\n\r\n      {/* HUD & overlays during live play */}\r\n      {started && (\r\n        <>\r\n          {/* keep interactive */}\r\n          <ExitButton onExit={handleExit} />\r\n          <CoinCounter\r\n            coins={coins}\r\n            highScore={displayHigh}\r\n            newHighScore={newHighScore}\r\n          />\r\n\r\n          {/* Non-interactive overlays so they don't block the canvas */}\r\n          {shouldRenderOverlayBg && (\r\n            <div\r\n              className={`countdown-bg-overlay ${!showOverlayBg ? 'hide' : ''}`}\r\n              style={{ pointerEvents: 'none' }}\r\n            />\r\n          )}\r\n\r\n          {(countdownPhase === 'lottie' || countdownPhase === 'begin') && (\r\n            <div\r\n              ref={lottieRef}\r\n              id=\"lottie-onboarding\"\r\n              className=\"countdown-lottie\"\r\n              style={{ pointerEvents: 'none' }}\r\n            />\r\n          )}\r\n\r\n          {showBeginText && (\r\n            <div className=\"countdown-display\" style={{ pointerEvents: 'none' }}>\r\n              <h1 className=\"countdown-text\">BEGIN!</h1>\r\n            </div>\r\n          )}\r\n\r\n          {gameOverVisible && (\r\n            <BlockGGameOver\r\n              onRestart={handleRestart}\r\n              visibleTrigger={gameOverVisible ? 1 : 0}\r\n              coins={coins}\r\n              newHighScore={newHighScore}\r\n            />\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Always mount the q5 canvas. It runs in demo mode while !started. */}\r\n      <LazyViewMount\r\n        load={() => import('./game-canvas')}\r\n        fallback={null}\r\n        eager={false}                 // ← keep lazy load FALSE (as requested)\r\n        eagerThreshold={0.2}\r\n        mountThreshold={0.4}\r\n        allowIdle={true}\r\n        observeTargetId={blockId}\r\n        rootMargin=\"0px 0px -15% 0px\"\r\n        componentProps={{\r\n          onReady: handleReady,\r\n          onCoinsChange: handleCoinsChange,\r\n          onGameOver: handleGameOver,\r\n          highScore: displayHigh,     // minor: mirror what's shown in HUD\r\n          pauseWhenHidden: true,\r\n          demoMode: !started,\r\n          overlayActive: countdownPhase === 'lottie' || countdownPhase === 'begin',\r\n          allowSpawns:\r\n            !started ||\r\n            (started && (countdownPhase === 'begin' || countdownPhase === null)),\r\n        }}\r\n      />\r\n    </section>\r\n  );\r\n}\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport lottie from 'lottie-web';\r\nimport onboardingAnimation from '../../svg/coin.json';\r\nimport { useProjectVisibility } from '../../utils/context-providers/project-context';\r\nimport { useTooltipInit } from '../../utils/tooltip/tooltipInit';\r\n\r\nconst BlockGOnboarding = ({ onStart, resetTrigger }) => {\r\n  const [visible, setVisible] = useState(true);\r\n  const [isFadingOut, setIsFadingOut] = useState(false);\r\n  const lottieRef = useRef(null);\r\n  const containerRef = useRef(null);\r\n  const lottieInstance = useRef(null);\r\n  useTooltipInit();\r\n  const {\r\n    focusedProjectKey,\r\n    scrollContainerRef,\r\n    previousScrollY,\r\n    setPreviousScrollY,\r\n    setFocusedProjectKey\r\n  } = useProjectVisibility();\r\n\r\n  const handleClick = () => {\r\n    if (focusedProjectKey) {\r\n      setPreviousScrollY(window.scrollY);\r\n\r\n      setTimeout(() => {\r\n        if (scrollContainerRef.current) {\r\n          scrollContainerRef.current.scrollTo({ top: 0, behavior: 'auto' });\r\n        } else {\r\n          window.scrollTo({ top: 0, behavior: 'auto' });\r\n        }\r\n      }, 0);\r\n    }\r\n    \r\n    if (onStart) onStart();\r\n    setIsFadingOut(true);\r\n  };\r\n\r\n  // Restore scroll position when exiting focus mode\r\n  useEffect(() => {\r\n    if (!focusedProjectKey && previousScrollY !== null) {\r\n      window.scrollTo({ top: previousScrollY, behavior: 'auto' });\r\n      setPreviousScrollY(null);\r\n    }\r\n  }, [focusedProjectKey]);\r\n\r\n  const initializeLottie = () => {\r\n    if (lottieRef.current) {\r\n      if (lottieInstance.current) {\r\n        lottieInstance.current.destroy();\r\n      }\r\n\r\n      lottieInstance.current = lottie.loadAnimation({\r\n        container: lottieRef.current,\r\n        renderer: 'svg',\r\n        loop: false,\r\n        autoplay: false,\r\n        animationData: onboardingAnimation,\r\n      });\r\n\r\n      lottieInstance.current.addEventListener('complete', () => {\r\n        lottieInstance.current.playSegments([41, lottieInstance.current.totalFrames], true);\r\n        lottieInstance.current.loop = true;\r\n      });\r\n    }\r\n  };\r\n\r\n  const destroyLottie = () => {\r\n    if (lottieInstance.current) {\r\n      lottieInstance.current.destroy();\r\n      lottieInstance.current = null;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver(\r\n      (entries) => {\r\n        entries.forEach(entry => {\r\n          if (entry.isIntersecting) {\r\n            initializeLottie();\r\n            if (lottieInstance.current) {\r\n              lottieInstance.current.stop();\r\n              lottieInstance.current.playSegments([0, lottieInstance.current.totalFrames], true);\r\n            }\r\n          } else {\r\n            destroyLottie();\r\n          }\r\n        });\r\n      },\r\n      { threshold: 0.1 }\r\n    );\r\n\r\n    if (containerRef.current) {\r\n      observer.observe(containerRef.current);\r\n    }\r\n\r\n    return () => {\r\n      observer.disconnect();\r\n      destroyLottie();\r\n    };\r\n  }, [resetTrigger]);\r\n\r\n  useEffect(() => {\r\n    if (isFadingOut) {\r\n      const timeout = setTimeout(() => {\r\n        setVisible(false);\r\n      }, 300);\r\n      return () => clearTimeout(timeout);\r\n    }\r\n  }, [isFadingOut]);\r\n\r\n  useEffect(() => {\r\n    if (resetTrigger) {\r\n      setVisible(true);\r\n      setIsFadingOut(false);\r\n    }\r\n  }, [resetTrigger]);\r\n\r\n  if (!visible) return null;\r\n\r\n  return (\r\n    <div\r\n      className=\"block-g-onboarding tooltip-block-g\"\r\n      ref={containerRef}\r\n      style={{\r\n        opacity: isFadingOut ? 0 : 1,\r\n        transition: 'opacity 0.3s ease',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n      }}\r\n    >\r\n      <div\r\n        ref={lottieRef}\r\n        className=\"coin\"\r\n        onClick={handleClick} // 👈 Only clickable here\r\n        style={{ pointerEvents: 'auto' }}\r\n      ></div>\r\n\r\n      <h1\r\n        className=\"onboarding-text\"\r\n        onClick={handleClick} // 👈 And here\r\n        style={{ pointerEvents: 'auto' }}\r\n      >\r\n        Click Here to Play!\r\n      </h1>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlockGOnboarding;","import {useEffect, useState} from 'react';\r\nimport client from '../../utils/sanity';\r\n\r\ntype Doc = { _id: string; score: number };\r\n\r\nconst ID = 'highscore';\r\nconst QUERY = `*[_id == $id][0]{ _id, score }`;\r\n\r\nexport const useHighScoreSubscription = () => {\r\n  const [highScore, setHighScore] = useState<number>(0);\r\n\r\n  useEffect(() => {\r\n    const params = {id: ID};\r\n\r\n    client.fetch<Doc | null>(QUERY, params).then((doc) => {\r\n      if (typeof doc?.score === 'number') setHighScore(doc.score);\r\n    });\r\n\r\n    const sub = client\r\n      .listen(QUERY, params, {includeResult: true, visibility: 'query'})\r\n      .subscribe((ev: any) => {\r\n        const next = ev?.result?.score;\r\n        if (typeof next === 'number') setHighScore(next);\r\n      });\r\n\r\n    return () => sub.unsubscribe?.();\r\n  }, []);\r\n\r\n  return highScore;\r\n};\r\n","import client from '../../utils/sanity';\r\n\r\ntype HS = { _id: string; _rev: string; score: number };\r\nconst ID = 'highscore';\r\n\r\n// Cast once to keep TS happy across client versions\r\nconst c: any = client;\r\n\r\nexport async function updateHighScore(newScore: number) {\r\n  try {\r\n    await c.createIfNotExists({_id: ID, _type: 'highScore', score: 0});\r\n    const doc: HS | null = await c.getDocument(ID);\r\n    const current = doc?.score ?? 0;\r\n    if (newScore <= current) return current;\r\n\r\n    const updated: HS = await c\r\n      .patch(ID)\r\n      .ifRevisionId(doc!._rev)\r\n      .set({score: newScore})\r\n      .commit();\r\n\r\n    return updated?.score ?? newScore;\r\n  } catch (err) {\r\n    console.error('[HS] update failed:', err);\r\n    return null;\r\n  }\r\n}\r\n","// Master color config\r\nexport interface ProjectColor {\r\n  rgb: string;         // \"204, 85, 41\"\r\n  tooltipAlpha?: number;\r\n  defaultAlpha?: number;\r\n  darkThemeTop?: string; // optional override for theme-color\r\n}\r\n\r\nexport const projectColors: Record<string, ProjectColor> = {\r\n  'Rotary Lamp': {\r\n    rgb: '204, 85, 41',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(72, 161, 161, 1)'\r\n  },\r\n  'Ice Cream Scoop': {\r\n    rgb: '234, 103, 97',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(23, 27, 24, 1)'\r\n  },\r\n  'Data Visualization': {\r\n    rgb: '153, 199, 7',\r\n    tooltipAlpha: 0.8,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(28, 30, 31, 1)'\r\n  },\r\n  'Evade the Rock': {\r\n    rgb: '101, 86, 175',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgb(25, 25, 25)'\r\n  },\r\n  'Dynamic App': {\r\n    rgb: '120, 211, 255',\r\n    tooltipAlpha: 0.6,\r\n    defaultAlpha: 0.6,\r\n    darkThemeTop: 'rgba(17, 17, 17, 1)'\r\n  }\r\n};\r\n","import { useEffect, useRef, useState, Suspense, type ComponentType, lazy } from 'react';\r\n\r\ntype Props = {\r\n  load: () => Promise<{ default: ComponentType<any> }>;\r\n  fallback?: React.ReactNode;\r\n\r\n  /** Conditional eager: only honored if initial visibility >= eagerThreshold. */\r\n  eager?: boolean;\r\n  /** Visibility ratio required for normal (non-eager) mount. */\r\n  mountThreshold?: number; // default 0.3\r\n  /** Also mount when the page goes idle (timeout 2s). */\r\n  allowIdle?: boolean;\r\n  /** Props to forward into the lazily loaded component. */\r\n  componentProps?: Record<string, any>;\r\n  /** If eager is true, minimum intersection ratio to honor it. */\r\n  eagerThreshold?: number; // default 0.2\r\n\r\n  /** Observe this element instead of the placeholder div (e.g., \"#block-dynamic\"). */\r\n  observeTargetId?: string;\r\n  /** IO rootMargin tweak if you want earlier/later triggers (e.g., '0px 0px -20% 0px'). */\r\n  rootMargin?: string;\r\n};\r\n\r\nconst hasWindow = typeof window !== 'undefined';\r\nconst hasRIC = hasWindow && 'requestIdleCallback' in (window as any);\r\nconst hasCIC = hasWindow && 'cancelIdleCallback' in (window as any);\r\n\r\nconst ric = (cb: any, opts?: any) =>\r\n  hasRIC ? (window as any).requestIdleCallback(cb, opts) : setTimeout(cb, opts?.timeout ?? 0);\r\nconst cic = (id: any) =>\r\n  hasCIC ? (window as any).cancelIdleCallback(id) : clearTimeout(id);\r\n\r\nexport default function LazyViewMount({\r\n  load,\r\n  fallback = null,\r\n  eager = false,\r\n  mountThreshold = 0.3,\r\n  allowIdle = true,\r\n  componentProps,\r\n  eagerThreshold = 0.2,\r\n  observeTargetId,\r\n  rootMargin,\r\n}: Props) {\r\n  const isServer = !hasWindow;\r\n  const selfRef = useRef<HTMLDivElement | null>(null);\r\n  const [Comp, setComp] = useState<ComponentType | null>(null);\r\n  const mounted = useRef(false);\r\n  const idleId = useRef<any>(null);\r\n  const initialDecisionMade = useRef(false);\r\n\r\n  const mountNow = () => {\r\n    if (mounted.current) return;\r\n    mounted.current = true;\r\n    setComp(() => lazy(load));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isServer || mounted.current) return;\r\n\r\n    // Determine which element to observe\r\n    const el =\r\n      (observeTargetId ? document.getElementById(observeTargetId) : null) ||\r\n      selfRef.current;\r\n\r\n    // If we can’t observe anything, fall back to idle (if allowed), else mount immediately\r\n    if (!el) {\r\n      if (allowIdle) {\r\n        idleId.current = ric(() => mountNow(), { timeout: 2000 });\r\n      } else {\r\n        mountNow();\r\n      }\r\n      return () => {\r\n        if (idleId.current) { cic(idleId.current); idleId.current = null; }\r\n      };\r\n    }\r\n\r\n    // If IO is absent (very old browsers), fall back similarly\r\n    if (typeof IntersectionObserver === 'undefined') {\r\n      if (allowIdle) {\r\n        idleId.current = ric(() => mountNow(), { timeout: 2000 });\r\n      } else {\r\n        mountNow();\r\n      }\r\n      return () => {\r\n        if (idleId.current) { cic(idleId.current); idleId.current = null; }\r\n      };\r\n    }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        const ratio = entry.intersectionRatio;\r\n\r\n        // 1) First decision: conditional eager (only on first callback)\r\n        if (!initialDecisionMade.current) {\r\n          initialDecisionMade.current = true;\r\n          if (eager && ratio >= eagerThreshold) {\r\n            mountNow();\r\n            io.disconnect();\r\n            if (idleId.current) { cic(idleId.current); idleId.current = null; }\r\n            return;\r\n          }\r\n          // else, fall through to normal threshold rule\r\n        }\r\n\r\n        // 2) Normal lazy rule\r\n        if (ratio >= mountThreshold) {\r\n          mountNow();\r\n          io.disconnect();\r\n          if (idleId.current) { cic(idleId.current); idleId.current = null; }\r\n        }\r\n      },\r\n      {\r\n        threshold: Array.from(new Set([0, eagerThreshold, mountThreshold])).sort(),\r\n        root: null,\r\n        rootMargin, // optional\r\n      }\r\n    );\r\n\r\n    io.observe(el);\r\n\r\n    if (allowIdle && !mounted.current) {\r\n      // schedule idle fallback; will be canceled if IO mounts earlier\r\n      idleId.current = ric(() => mountNow(), { timeout: 2000 });\r\n    }\r\n\r\n    return () => {\r\n      io.disconnect();\r\n      if (idleId.current) { cic(idleId.current); idleId.current = null; }\r\n    };\r\n  }, [\r\n    isServer,\r\n    eager,\r\n    eagerThreshold,\r\n    mountThreshold,\r\n    allowIdle,\r\n    load,\r\n    observeTargetId,\r\n    rootMargin,\r\n  ]);\r\n\r\n  return (\r\n    <div ref={selfRef} style={{ width: '100%', height: '100%' }}>\r\n      {Comp ? (\r\n        <Suspense fallback={fallback}>\r\n          <Comp {...(componentProps || {})} />\r\n        </Suspense>\r\n      ) : (\r\n        fallback\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","import React, {\r\n  createContext,\r\n  useState,\r\n  useContext,\r\n  useRef,\r\n  ReactNode,\r\n} from 'react';\r\n\r\ninterface ProjectVisibilityContextType {\r\n  activeProject?: string;\r\n  setActiveProject: (title: string) => void;\r\n\r\n  blockGClick: boolean;\r\n  setBlockGClick: (clicked: boolean) => void;\r\n\r\n  currentIndex: number;\r\n  setCurrentIndex: React.Dispatch<React.SetStateAction<number>>;\r\n\r\n  scrollContainerRef: React.RefObject<HTMLDivElement>;\r\n\r\n  isDragging: boolean;\r\n  setIsDragging: React.Dispatch<React.SetStateAction<boolean>>;\r\n\r\n  focusedProjectKey: string | null;\r\n  setFocusedProjectKey: React.Dispatch<React.SetStateAction<string | null>>;\r\n\r\n  previousScrollY: number | null;\r\n  setPreviousScrollY: React.Dispatch<React.SetStateAction<number | null>>;\r\n}\r\n\r\ninterface ProjectVisibilityProviderProps {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ProjectVisibilityContext = createContext<ProjectVisibilityContextType | undefined>(undefined);\r\n\r\nexport const ProjectVisibilityProvider = ({ children }: ProjectVisibilityProviderProps) => {\r\n  const [activeProject, setActiveProject] = useState<string | undefined>(undefined);\r\n  const [blockGClick, setBlockGClick] = useState(false);\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [focusedProjectKey, setFocusedProjectKey] = useState<string | null>(null);\r\n  const [previousScrollY, setPreviousScrollY] = useState<number | null>(null);\r\n\r\n  const scrollContainerRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  return (\r\n    <ProjectVisibilityContext.Provider\r\n      value={{\r\n        activeProject,\r\n        setActiveProject,\r\n        blockGClick,\r\n        setBlockGClick,\r\n        currentIndex,\r\n        setCurrentIndex,\r\n        scrollContainerRef,\r\n        isDragging,\r\n        setIsDragging,\r\n        focusedProjectKey,\r\n        setFocusedProjectKey,\r\n        previousScrollY,\r\n        setPreviousScrollY,\r\n      }}\r\n    >\r\n      {children}\r\n    </ProjectVisibilityContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useProjectVisibility = () => {\r\n  const context = useContext(ProjectVisibilityContext);\r\n  if (!context) {\r\n    throw new Error('useProjectVisibility must be used within ProjectVisibilityProvider');\r\n  }\r\n  return context;\r\n};\r\n","// utils/tooltip/global-tooltip.ts\r\nimport '../../styles/tooltip.css';\r\nimport { projectColors } from '../content-utility/color-map';\r\n\r\ntype TooltipInfo = { tags: string[]; backgroundColor: string };\r\nconst tooltipDataCache: Record<string, TooltipInfo> = {};\r\n\r\nconst LOCAL_FALLBACK_TAGS: Record<string, string[]> = {\r\n  'block-g': ['#q5.js Canvas', '#Gamification', '#Lottie Animation'],\r\n};\r\n\r\nconst TITLE_BY_KEY: Record<string, string> = {\r\n  'rotary-lamp': 'Rotary Lamp',\r\n  'ice-scoop': 'Ice Cream Scoop',\r\n  'data-viz': 'Data Visualization',\r\n  'block-g': 'Evade the Rock',\r\n  'dynamic': 'Dynamic App',\r\n};\r\n\r\nfunction bgForKey(key: string) {\r\n  const colorInfo = projectColors[TITLE_BY_KEY[key]];\r\n  const alpha = colorInfo?.tooltipAlpha ?? 0.6;\r\n  return colorInfo ? `rgba(${colorInfo.rgb}, ${alpha})` : 'rgba(85,95,90,0.6)';\r\n}\r\n\r\nfunction createTooltipDOM() {\r\n  const el = document.createElement('div');\r\n  el.id = 'custom-global-tooltip';\r\n  el.style.position = 'fixed';\r\n  el.style.pointerEvents = 'none';\r\n  el.style.zIndex = '9999';\r\n  el.style.opacity = '0';\r\n  el.style.visibility = 'hidden';\r\n  el.style.backdropFilter = 'blur(8px)';\r\n  el.style.color = '#fff';\r\n  el.style.transition = 'opacity 0.3s ease, visibility 0.3s ease';\r\n  el.className = 'custom-tooltip-blur';\r\n  const root = document.getElementById('efe-portfolio') || document.body;\r\n  root.appendChild(el);\r\n  return el as HTMLDivElement;\r\n}\r\n\r\nlet tooltipEl: HTMLDivElement | null = null;\r\nlet currentKey = '';\r\nlet hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\nexport const fetchTooltipDataForKey = async (key: string): Promise<TooltipInfo> => {\r\n  if (tooltipDataCache[key]) return tooltipDataCache[key];\r\n\r\n  const bg = bgForKey(key);\r\n\r\n  // local fallback\r\n  if (LOCAL_FALLBACK_TAGS[key]) {\r\n    const info = { tags: LOCAL_FALLBACK_TAGS[key], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n\r\n  // CMS fetch by slug\r\n  try {\r\n    const client = (await import('../sanity')).default;\r\n    const res = await client.fetch<{ tags?: string[] } | null>(\r\n      `*[_type==\"mediaBlock\" && slug.current == $key][0]{ tags }`,\r\n      { key }\r\n    );\r\n    const info: TooltipInfo = { tags: res?.tags ?? [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  } catch {\r\n    const info: TooltipInfo = { tags: [], backgroundColor: bg };\r\n    tooltipDataCache[key] = info;\r\n    return info;\r\n  }\r\n};\r\n\r\nconst showTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '1';\r\n  tooltipEl.style.visibility = 'visible';\r\n  hideTimeout = setTimeout(() => hideTooltip(), 99_000);\r\n};\r\n\r\nconst hideTooltip = () => {\r\n  if (!tooltipEl) return;\r\n  if (hideTimeout) clearTimeout(hideTimeout);\r\n  tooltipEl.style.opacity = '0';\r\n  tooltipEl.style.visibility = 'hidden';\r\n  currentKey = '';\r\n};\r\n\r\nfunction positionTooltip(x: number, y: number) {\r\n  if (!tooltipEl) return;\r\n  const rect = tooltipEl.getBoundingClientRect();\r\n  const padding = 0;\r\n  const vw = window.innerWidth;\r\n  const vh = window.innerHeight;\r\n\r\n  const nearTop = y < rect.height + padding + 20;\r\n  const nearBottom = y + rect.height + padding > vh - 20;\r\n  const nearRight = x + rect.width + padding > vw - 20;\r\n  const nearLeft = x < rect.width + padding + 20;\r\n\r\n  let left: number, top: number;\r\n  if (nearBottom) { top = y - rect.height - padding - 8; left = x - rect.width * 0; }\r\n  else if (nearTop) { top = y + padding - 14; left = x - rect.width * 0; }\r\n  else if (nearRight) { top = y - rect.height / 2; left = x - rect.width - padding - 24; }\r\n  else if (nearLeft) { top = y - rect.height / 2; left = x + padding - 4; }\r\n  else { top = y - rect.height / 1.6; left = x + padding - 2; }\r\n\r\n  left = Math.max(padding, Math.min(left, vw - rect.width - padding));\r\n  top  = Math.max(padding, Math.min(top,  vh - rect.height - padding));\r\n\r\n  tooltipEl.style.left = `${left}px`;\r\n  tooltipEl.style.top  = `${top}px`;\r\n}\r\n\r\nexport function initGlobalTooltip(isRealMobile: boolean) {\r\n  if (tooltipEl) return () => {};\r\n  tooltipEl = createTooltipDOM();\r\n\r\n  let lastMouseX = -1;\r\n  let lastMouseY = -1;\r\n  let ticking = false;\r\n  let scrollCheckTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  const updateForElement = async (el: Element | null) => {\r\n    if (!(el instanceof HTMLElement)) { hideTooltip(); return; }\r\n    const tooltipClass = [...el.classList].find(c => c.startsWith('tooltip-'));\r\n    if (!tooltipClass) { hideTooltip(); return; }\r\n\r\n    const key = tooltipClass.replace('tooltip-', '');\r\n    if (key !== currentKey) {\r\n      currentKey = key;\r\n      const info = await fetchTooltipDataForKey(key);\r\n\r\n      if (!info.tags.length) { hideTooltip(); return; }\r\n      tooltipEl!.innerHTML = info.tags.map(t => `<p class=\"tooltip-tag\">${t}</p>`).join('');\r\n      tooltipEl!.style.backgroundColor = info.backgroundColor;\r\n      showTooltip();\r\n    } else if (tooltipEl!.style.opacity === '0' || tooltipEl!.style.visibility === 'hidden') {\r\n      showTooltip();\r\n    }\r\n  };\r\n\r\n  const onMouseMove = (e: MouseEvent) => {\r\n    lastMouseX = e.clientX;\r\n    lastMouseY = e.clientY;\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n    updateForElement(e.target as Element);\r\n  };\r\n\r\n  const checkHoveredElementOnScroll = () => {\r\n    const el = document.elementFromPoint(lastMouseX, lastMouseY);\r\n    updateForElement(el);\r\n    requestAnimationFrame(() => positionTooltip(lastMouseX, lastMouseY));\r\n  };\r\n\r\n  const onScroll = () => {\r\n    if (!ticking) {\r\n      window.requestAnimationFrame(() => { checkHoveredElementOnScroll(); ticking = false; });\r\n      ticking = true;\r\n    }\r\n    if (scrollCheckTimeout) clearTimeout(scrollCheckTimeout);\r\n    scrollCheckTimeout = setTimeout(() => {}, 120);\r\n  };\r\n\r\n  const onMouseOut = (e: MouseEvent) => {\r\n    if (!e.relatedTarget) hideTooltip();\r\n  };\r\n\r\n  // only attach scroll observer for non-mobile real viewports\r\n  if (!isRealMobile) window.addEventListener('scroll', onScroll, true);\r\n  document.addEventListener('mousemove', onMouseMove, { passive: true });\r\n  document.addEventListener('mouseout', onMouseOut, { passive: true });\r\n\r\n  return () => {\r\n    if (!tooltipEl) return;\r\n    if (!isRealMobile) window.removeEventListener('scroll', onScroll, true);\r\n    document.removeEventListener('mousemove', onMouseMove);\r\n    document.removeEventListener('mouseout', onMouseOut);\r\n    tooltipEl.remove();\r\n    tooltipEl = null;\r\n    if (hideTimeout) clearTimeout(hideTimeout);\r\n  };\r\n}\r\n","// utils/tooltip/tooltipInit.ts\r\nimport { useEffect } from 'react';\r\nimport { initGlobalTooltip } from './tooltip';\r\nimport { useRealMobileViewport } from '../content-utility/real-mobile';\r\n\r\nexport const useTooltipInit = () => {\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    const dispose = initGlobalTooltip(isRealMobile);\r\n    return () => dispose?.();\r\n  }, [isRealMobile]);\r\n};\r\n"],"names":["React","useEffect","useRef","lottie","coin","jsx","_jsx","jsxs","_jsxs","CoinCounter","coins","highScore","newHighScore","coinRef","current","anim","loadAnimation","container","renderer","loop","autoplay","animationData","onDomLoaded","svg","querySelector","classList","add","total","totalFrames","segment","loopOnce","playSegments","onComplete","addEventListener","cleanupHandlers","complete","removeEventListener","destroy","className","children","ref","style","background","useState","ExitButton","onExit","visible","setVisible","isFadingOut","setIsFadingOut","handleClick","timeout","setTimeout","clearTimeout","onClick","opacity","transition","gameOver","BlockGGameOver","onRestart","visibleTrigger","lottieRef","t","prevent","e","preventDefault","window","passive","prev","document","body","overflow","role","position","inset","width","height","display","alignItems","justifyContent","cursor","color","margin","useCallback","BlockGOnboarding","useRealMobileViewport","desktopOnboarding","mobileOnboarding","LazyViewMount","gameLoaders","useHighScoreSubscription","updateHighScore","Fragment","_Fragment","GAME_MODE_CLASS","activateGameMode","deactivateGameMode","remove","isFullscreen","fullscreenElement","BlockGHost","blockId","isRealMobile","started","setStarted","fakeFS","setFakeFS","setCoins","gameOverVisible","setGameOverVisible","setNewHighScore","remoteHighScore","stableHigh","countdownPhase","setCountdownPhase","showBeginText","setShowBeginText","showOverlayBg","setShowOverlayBg","shouldRenderOverlayBg","setShouldRenderOverlayBg","restartApi","enterFullscreen","el","getElementById","req","requestFullscreen","webkitRequestFullscreen","msRequestFullscreen","mozRequestFullScreen","p","call","then","onStart","game","requestAnimationFrame","focus","gameRoot","preventScrollKeys","contains","target","tag","tagName","test","k","key","handleReady","api","handleCoinsChange","n","handleGameOver","finalCoins","isNewHigh","catch","console","error","handleRestart","restart","handleExit","exit","exitFullscreen","webkitExitFullscreen","msExitFullscreen","mozCancelFullScreen","displayHigh","id","tabIndex","resetTrigger","pointerEvents","load","fallback","eager","eagerThreshold","mountThreshold","allowIdle","observeTargetId","rootMargin","componentProps","onReady","onCoinsChange","onGameOver","pauseWhenHidden","demoMode","overlayActive","allowSpawns","onboardingAnimation","useProjectVisibility","useTooltipInit","containerRef","lottieInstance","focusedProjectKey","scrollContainerRef","previousScrollY","setPreviousScrollY","setFocusedProjectKey","scrollY","scrollTo","top","behavior","initializeLottie","destroyLottie","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","stop","threshold","observe","disconnect","client","ID","QUERY","setHighScore","params","fetch","doc","score","sub","listen","includeResult","visibility","subscribe","ev","next","result","unsubscribe","c","newScore","createIfNotExists","_id","_type","getDocument","updated","patch","ifRevisionId","_rev","set","commit","err","projectColors","rgb","tooltipAlpha","defaultAlpha","darkThemeTop","Suspense","lazy","hasWindow","hasRIC","hasCIC","ric","cb","opts","requestIdleCallback","cic","cancelIdleCallback","isServer","selfRef","Comp","setComp","mounted","idleId","initialDecisionMade","mountNow","io","ratio","intersectionRatio","Array","from","Set","sort","root","setIsRealMobile","checkMobile","touch","navigator","maxTouchPoints","coarse","matchMedia","matches","innerWidth","ua","userAgent","vendor","opera","isIOS","platform","isAndroid","realMobile","createContext","useContext","ProjectVisibilityContext","undefined","ProjectVisibilityProvider","activeProject","setActiveProject","blockGClick","setBlockGClick","currentIndex","setCurrentIndex","isDragging","setIsDragging","Provider","value","context","Error","tooltipDataCache","LOCAL_FALLBACK_TAGS","TITLE_BY_KEY","bgForKey","colorInfo","alpha","createTooltipDOM","createElement","zIndex","backdropFilter","appendChild","tooltipEl","currentKey","hideTimeout","fetchTooltipDataForKey","bg","info","tags","backgroundColor","default","res","showTooltip","hideTooltip","positionTooltip","x","y","rect","getBoundingClientRect","padding","vw","vh","innerHeight","nearTop","nearBottom","nearRight","nearLeft","left","Math","max","min","initGlobalTooltip","lastMouseX","lastMouseY","ticking","scrollCheckTimeout","updateForElement","HTMLElement","tooltipClass","find","startsWith","replace","length","innerHTML","map","join","onMouseMove","clientX","clientY","checkHoveredElementOnScroll","elementFromPoint","onScroll","onMouseOut","relatedTarget","dispose"],"sourceRoot":""}