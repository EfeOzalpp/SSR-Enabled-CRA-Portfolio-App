{"version":3,"file":"dynamic-shadow.server.js","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AACmD;AAClB;AACwC;AAAA;AAOzE,MAAMO,WAA4B,GAAGA,CAAC;EAAEC;AAAQ,CAAC,KAAK;EACpD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,+CAAQ,CAAqB,IAAI,CAAC;EAE9DD,gDAAS,CAAC,MAAM;IACd,IAAI,OAAOU,QAAQ,KAAK,WAAW,EAAE;IAErC,MAAMC,SAAS,GAAGD,QAAQ,CAACE,cAAc,CAACL,OAAO,CAAC;IAClD,IAAI,CAACI,SAAS,EAAE;IAEhB,MAAME,OAAO,GAAGA,CAAA,KAAM;MACpB,MAAMC,OAAO,GAAGH,SAAS,CAACI,aAAa,CAAc,iBAAiB,CAAC,IAAI,IAAI;MAC/E,IAAID,OAAO,EAAE;QACXL,SAAS,CAACK,OAAO,CAAC;QAClB,OAAO,IAAI;MACb;MACA,OAAO,KAAK;IACd,CAAC;;IAED;IACA,IAAID,OAAO,CAAC,CAAC,EAAE;;IAEf;IACA,MAAMG,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,MAAM;MAC1C,IAAIJ,OAAO,CAAC,CAAC,EAAE;QACbG,QAAQ,CAACE,UAAU,CAAC,CAAC;MACvB;IACF,CAAC,CAAC;IACFF,QAAQ,CAACG,OAAO,CAACR,SAAS,EAAE;MAAES,SAAS,EAAE,IAAI;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAE/D,OAAO,MAAML,QAAQ,CAACE,UAAU,CAAC,CAAC;EACpC,CAAC,EAAE,CAACX,OAAO,CAAC,CAAC;EAEb,IAAI,CAACC,MAAM,EAAE,OAAO,IAAI;EACxB,oBAAON,6DAAqB,CAC1BG,+DAAA,CAACF,2EAAiB;IAACoB,aAAa,EAAEA,CAAA,KAAM,CAAC;EAAE,CAAE,CAAC,EAC9Cf,MACF,CAAC;AACH,CAAC;AAED,iEAAeF,WAAW,E;;;;;;;;;;;;;;;;ACjD1B;AAC4C;AAErC,SAASkB,qBAAqBA,CAAA,EAAG;EACtC,MAAM,CAACC,YAAY,EAAEC,eAAe,CAAC,GAAGzB,+CAAQ,CAAC,KAAK,CAAC;EAEvDD,gDAAS,CAAC,MAAM;IACd,MAAM2B,WAAW,GAAGA,CAAA,KAAM;MACxB,MAAMC,KAAK,GAAGC,SAAS,CAACC,cAAc,GAAG,CAAC;MAC1C,MAAMC,MAAM,GAAGC,MAAM,CAACC,UAAU,GAAG,mBAAmB,CAAC,CAACC,OAAO,IAAI,KAAK;MACxE,MAAMC,KAAK,GAAGH,MAAM,CAACI,UAAU;MAC/B,MAAMC,EAAE,GAAGR,SAAS,CAACS,SAAS,IAAIT,SAAS,CAACU,MAAM,IAAKP,MAAM,CAASQ,KAAK;;MAE3E;MACA,MAAMC,KAAK,GAAG,kBAAkB,CAACC,IAAI,CAACL,EAAE,CAAC,IACtCR,SAAS,CAACc,QAAQ,KAAK,UAAU,IAAIf,KAAM,CAAC,CAAC;;MAEhD;MACA,MAAMgB,SAAS,GAAG,SAAS,CAACF,IAAI,CAACL,EAAE,CAAC;;MAEpC;MACA;MACA;MACA,MAAMQ,UAAU,GACbjB,KAAK,IAAIO,KAAK,IAAI,IAAI,IACvBM,KAAK,IACLG,SAAS,IACTb,MAAM;MAERL,eAAe,CAACmB,UAAU,CAAC;IAC7B,CAAC;IAEDlB,WAAW,CAAC,CAAC;IACbK,MAAM,CAACc,gBAAgB,CAAC,QAAQ,EAAEnB,WAAW,CAAC;IAC9CK,MAAM,CAACc,gBAAgB,CAAC,mBAAmB,EAAEnB,WAAW,CAAC;IAEzD,OAAO,MAAM;MACXK,MAAM,CAACe,mBAAmB,CAAC,QAAQ,EAAEpB,WAAW,CAAC;MACjDK,MAAM,CAACe,mBAAmB,CAAC,mBAAmB,EAAEpB,WAAW,CAAC;IAC9D,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EAEN,OAAOF,YAAY;AACrB,C","sources":["webpack://personal-site/./src/components/dynamic-app/shadow-entry.tsx","webpack://personal-site/./src/utils/content-utility/real-mobile.ts"],"sourcesContent":["// src/components/dynamic-app/shadow-entry.tsx\r\nimport React, { useEffect, useState } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport DynamicAppInbound from '../../dynamic-app/dynamic-app-shadow.jsx';\r\n\r\ntype Props = {\r\n  /** The outer block element id, e.g. \"block-dynamic\" */\r\n  blockId: string;\r\n};\r\n\r\nconst ShadowEntry: React.FC<Props> = ({ blockId }) => {\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (typeof document === 'undefined') return;\r\n\r\n    const container = document.getElementById(blockId);\r\n    if (!container) return;\r\n\r\n    const tryFind = () => {\r\n      const overlay = container.querySelector<HTMLElement>('.screen-overlay') || null;\r\n      if (overlay) {\r\n        setTarget(overlay);\r\n        return true;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // First try immediately\r\n    if (tryFind()) return;\r\n\r\n    // Watch for it\r\n    const observer = new MutationObserver(() => {\r\n      if (tryFind()) {\r\n        observer.disconnect();\r\n      }\r\n    });\r\n    observer.observe(container, { childList: true, subtree: true });\r\n\r\n    return () => observer.disconnect();\r\n  }, [blockId]);\r\n\r\n  if (!target) return null;\r\n  return ReactDOM.createPortal(\r\n    <DynamicAppInbound onFocusChange={() => {}} />,\r\n    target\r\n  );\r\n};\r\n\r\nexport default ShadowEntry;\r\n","// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n"],"names":["React","useEffect","useState","ReactDOM","DynamicAppInbound","jsx","_jsx","ShadowEntry","blockId","target","setTarget","document","container","getElementById","tryFind","overlay","querySelector","observer","MutationObserver","disconnect","observe","childList","subtree","createPortal","onFocusChange","useRealMobileViewport","isRealMobile","setIsRealMobile","checkMobile","touch","navigator","maxTouchPoints","coarse","window","matchMedia","matches","width","innerWidth","ua","userAgent","vendor","opera","isIOS","test","platform","isAndroid","realMobile","addEventListener","removeEventListener"],"sourceRoot":""}