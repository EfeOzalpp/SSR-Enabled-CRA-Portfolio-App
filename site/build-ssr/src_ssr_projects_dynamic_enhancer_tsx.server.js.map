{"version":3,"file":"src_ssr_projects_dynamic_enhancer_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/ssr/projects/dynamic.enhancer.tsx","webpack://personal-site/./src/utils/content-utility/dynamic-overlay.ts","webpack://personal-site/./src/utils/content-utility/real-mobile.ts"],"sourcesContent":["// src/ssr/projects/dynamic.enhancer.tsx\r\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { useDynamicOverlay } from '../../utils/content-utility/dynamic-overlay';\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile';\r\n\r\ntype ShadowInboundProps = { onFocusChange?: (f: boolean) => void; onReady?: () => void };\r\ntype ShadowInboundType = React.ComponentType<ShadowInboundProps>;\r\n\r\nfunction scheduleIdle(cb: () => void, timeout = 2000): () => void {\r\n  const w = window as unknown as {\r\n    requestIdleCallback?: (cb: IdleRequestCallback, opts?: { timeout?: number }) => number;\r\n    cancelIdleCallback?: (id: number) => void;\r\n  };\r\n  if (typeof w.requestIdleCallback === 'function') {\r\n    const id = w.requestIdleCallback(cb as unknown as IdleRequestCallback, { timeout });\r\n    return () => w.cancelIdleCallback?.(id);\r\n  }\r\n  const t = window.setTimeout(cb, timeout);\r\n  return () => window.clearTimeout(t);\r\n}\r\n\r\nconst DynamicEnhancer: React.FC = () => {\r\n  // locate SSR nodes\r\n  const frameRef = useRef<HTMLElement | null>(null);\r\n  const [overlayEl, setOverlayEl] = useState<HTMLElement | null>(null);\r\n\r\n  useLayoutEffect(() => {\r\n    const img = document.getElementById('dynamic-device-frame') as HTMLElement | null;\r\n    frameRef.current = img;\r\n    const overlay = img?.closest('.device-wrapper')?.querySelector('.screen-overlay') as HTMLElement | null;\r\n    setOverlayEl(overlay ?? null);\r\n  }, []);\r\n\r\n  // compute overlay sizing\r\n  const overlaySize = useDynamicOverlay(frameRef);\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    if (!overlayEl) return;\r\n    const isPhone = window.matchMedia('(max-width: 767.98px)').matches;\r\n\r\n    if (isPhone) {\r\n      overlayEl.style.width = `${overlaySize.width}px`;\r\n      overlayEl.style.height = isRealMobile\r\n        ? `${overlaySize.heightSet1}svh`\r\n        : `${overlaySize.heightSet2}px`;\r\n    } else {\r\n      overlayEl.style.removeProperty('width');\r\n      overlayEl.style.removeProperty('height');\r\n    }\r\n  }, [overlayEl, overlaySize.width, overlaySize.heightSet1, overlaySize.heightSet2, isRealMobile]);\r\n\r\n  // gate mounting of shadow app\r\n  const [shouldMountShadow, setShouldMountShadow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const container = document.getElementById('block-dynamic');\r\n    if (!container) { setShouldMountShadow(true); return; }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.intersectionRatio >= 0.3) {\r\n          setShouldMountShadow(true);\r\n          io.disconnect();\r\n        }\r\n      },\r\n      { threshold: [0, 0.3] }\r\n    );\r\n    io.observe(container);\r\n\r\n    const cancel = scheduleIdle(() => setShouldMountShadow(true), 2000);\r\n    return () => { io.disconnect(); cancel(); };\r\n  }, []);\r\n\r\n  // lazy import + portal\r\n  const [ShadowInbound, setShadowInbound] = useState<ShadowInboundType | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!shouldMountShadow) return;\r\n    let alive = true;\r\n    import('../../dynamic-app/dynamic-app-shadow.jsx')\r\n      .then(m => { if (alive) setShadowInbound(() => m.default as ShadowInboundType); })\r\n      .catch(err => console.warn('[DynamicEnhancer] shadow import failed:', err));\r\n    return () => { alive = false; };\r\n  }, [shouldMountShadow]);\r\n\r\n  // hide SSR loader when ready\r\n  useEffect(() => {\r\n    const loader = document.getElementById('dynamic-overlay-loader');\r\n    const onHydrated = () => { if (loader) loader.style.display = 'none'; };\r\n    window.addEventListener('dynamic-app:hydrated', onHydrated as EventListener);\r\n    if (ShadowInbound && overlayEl) requestAnimationFrame(() => { if (loader) loader.style.display = 'none'; });\r\n    return () => window.removeEventListener('dynamic-app:hydrated', onHydrated as EventListener);\r\n  }, [ShadowInbound, overlayEl]);\r\n\r\n  if (!overlayEl || !ShadowInbound || !shouldMountShadow) return null;\r\n\r\n  const handleReady = () => window.dispatchEvent(new CustomEvent('dynamic-app:hydrated'));\r\n  return createPortal(<ShadowInbound onFocusChange={() => {}} onReady={handleReady} />, overlayEl);\r\n};\r\n\r\nexport default DynamicEnhancer;\r\n","import { useEffect, useState } from 'react';\r\n\r\nexport function useDynamicOverlay(frameRef: React.RefObject<HTMLElement>) {\r\n  const [style, setStyle] = useState<{\r\n    width: number;\r\n    heightSet1: number;\r\n    heightSet2: number;\r\n  }>({\r\n    width: 0,\r\n    heightSet1: 0,\r\n    heightSet2: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const update = () => {\r\n      if (!frameRef.current) return;\r\n\r\n      const rect = frameRef.current.getBoundingClientRect();\r\n      const aspect = rect.width / rect.height;\r\n\r\n      // Aspect ratio breakpoints\r\n      const minAspect = 1.5 / 6.5; // ~0.2307\r\n      const maxAspect = 3.3 / 6.5; // ~0.5077\r\n\r\n      // Width range (shared)\r\n      const minWidth = 150;\r\n      const maxWidth = 320;\r\n\r\n      // Height range set 1 (your current svh-based values)\r\n      const minHeightSet1 = 63;\r\n      const maxHeightSet1 = 93;\r\n\r\n      // Height range set 2 (original px-based)\r\n      const minHeightSet2 = 280;\r\n      const maxHeightSet2 = 610;\r\n\r\n      // --- Aspect ratio-based lerp ---\r\n      let width: number;\r\n      let height1: number;\r\n      let height2: number;\r\n\r\n      if (aspect <= minAspect) {\r\n        width = minWidth;\r\n        height1 = minHeightSet1;\r\n        height2 = minHeightSet2;\r\n      } else if (aspect >= maxAspect) {\r\n        width = maxWidth;\r\n        height1 = maxHeightSet1;\r\n        height2 = maxHeightSet2;\r\n      } else {\r\n        const t = (aspect - minAspect) / (maxAspect - minAspect);\r\n        width = minWidth + (maxWidth - minWidth) * t;\r\n        height1 = minHeightSet1 + (maxHeightSet1 - minHeightSet1) * t;\r\n        height2 = minHeightSet2 + (maxHeightSet2 - minHeightSet2) * t;\r\n      }\r\n\r\n      // --- Absolute height multiplier (0 → 2 over 0–1300px) ---\r\n      const minFrameHeight = 0;\r\n      const maxFrameHeight = 1300;\r\n      const minMultiplier = 0;\r\n      const maxMultiplier = 2;\r\n\r\n      const clampedHeight = Math.min(Math.max(rect.height, minFrameHeight), maxFrameHeight);\r\n      const heightT = (clampedHeight - minFrameHeight) / (maxFrameHeight - minFrameHeight);\r\n      const heightMultiplier = minMultiplier + (maxMultiplier - minMultiplier) * heightT;\r\n\r\n      // Apply multiplier\r\n      width *= heightMultiplier;\r\n      height1 *= heightMultiplier;\r\n      height2 *= heightMultiplier;\r\n\r\n      setStyle({\r\n        width,\r\n        heightSet1: height1,\r\n        heightSet2: height2,\r\n      });\r\n    };\r\n\r\n    update();\r\n    window.addEventListener('resize', update);\r\n    window.addEventListener('orientationchange', update);\r\n    return () => {\r\n      window.removeEventListener('resize', update);\r\n      window.removeEventListener('orientationchange', update);\r\n    };\r\n  }, [frameRef]);\r\n\r\n  return style; // { width, heightSet1, heightSet2 }\r\n}\r\n","// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n"],"names":["React","useEffect","useLayoutEffect","useRef","useState","createPortal","useDynamicOverlay","useRealMobileViewport","jsx","_jsx","scheduleIdle","cb","timeout","w","window","requestIdleCallback","id","cancelIdleCallback","t","setTimeout","clearTimeout","DynamicEnhancer","frameRef","overlayEl","setOverlayEl","img","document","getElementById","current","overlay","closest","querySelector","overlaySize","isRealMobile","isPhone","matchMedia","matches","style","width","height","heightSet1","heightSet2","removeProperty","shouldMountShadow","setShouldMountShadow","container","io","IntersectionObserver","entry","intersectionRatio","disconnect","threshold","observe","cancel","ShadowInbound","setShadowInbound","alive","then","m","default","catch","err","console","warn","loader","onHydrated","display","addEventListener","requestAnimationFrame","removeEventListener","handleReady","dispatchEvent","CustomEvent","onFocusChange","onReady","setStyle","update","rect","getBoundingClientRect","aspect","minAspect","maxAspect","minWidth","maxWidth","minHeightSet1","maxHeightSet1","minHeightSet2","maxHeightSet2","height1","height2","minFrameHeight","maxFrameHeight","minMultiplier","maxMultiplier","clampedHeight","Math","min","max","heightT","heightMultiplier","setIsRealMobile","checkMobile","touch","navigator","maxTouchPoints","coarse","innerWidth","ua","userAgent","vendor","opera","isIOS","test","platform","isAndroid","realMobile"],"sourceRoot":""}