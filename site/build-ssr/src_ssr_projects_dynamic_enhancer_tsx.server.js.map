{"version":3,"file":"src_ssr_projects_dynamic_enhancer_tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/preload-dynamic-app.ts","webpack://personal-site/./src/ssr/projects/dynamic.enhancer.tsx","webpack://personal-site/./src/utils/content-utility/dynamic-overlay.ts","webpack://personal-site/./src/utils/content-utility/real-mobile.ts","webpack://personal-site/./src/utils/loading/loading-hub.tsx"],"sourcesContent":["// src/dynamic-app/preload-dynamic-app.ts\r\nimport fetchSVGIcons from './lib/fetchSVGIcons';\r\nimport { fetchImages } from './lib/fetchUser';\r\n\r\nexport type Cache = { icons?: Record<string, string>; images?: any[] };\r\n\r\ntype IconLike = { title?: string; icon?: string; url?: string };\r\n\r\nlet cache: Cache = {};\r\nlet inFlight: Promise<Cache> | null = null;\r\n\r\nexport function getPreloadedDynamicApp(): Cache {\r\n  return cache;\r\n}\r\n\r\nexport function primeFromSSR(data?: Partial<Cache>) {\r\n  if (!data) return;\r\n  cache = { ...cache, ...data };\r\n}\r\n\r\nfunction toIconMap(list: IconLike[]): Record<string, string> {\r\n  return list.reduce((acc, it) => {\r\n    if (!it?.title) return acc;\r\n    const val = it.icon ?? it.url; // inline SVG takes precedence; else URL\r\n    if (typeof val === 'string' && val.length > 0) acc[it.title] = val;\r\n    return acc;\r\n  }, {} as Record<string, string>);\r\n}\r\n\r\n/** Wait for current preloading (if any), then return cache */\r\nexport async function whenDynamicPreloadReady(): Promise<Cache> {\r\n  if (cache.icons && cache.images) return cache;\r\n  if (inFlight) {\r\n    await inFlight;\r\n    return cache;\r\n  }\r\n  return cache;\r\n}\r\n\r\nexport async function ensureIconsPreload(): Promise<Record<string, string>> {\r\n  // If a full preloading is in-flight, wait for it instead of double-fetching\r\n  if (!cache.icons && inFlight) {\r\n    await inFlight;\r\n    return cache.icons || {};\r\n  }\r\n  if (cache.icons) return cache.icons;\r\n\r\n  let iconsRaw: unknown;\r\n  try {\r\n    iconsRaw = await fetchSVGIcons();\r\n  } catch {\r\n    iconsRaw = [];\r\n  }\r\n  const list = Array.isArray(iconsRaw) ? (iconsRaw as IconLike[]) : [];\r\n  const icons = toIconMap(list);\r\n  cache.icons = icons;\r\n  return icons;\r\n}\r\n\r\nexport async function ensureImagesPreload(): Promise<any[]> {\r\n  // If a full preloading is in-flight, wait for it instead of double-fetching\r\n  if (!cache.images && inFlight) {\r\n    await inFlight;\r\n    return cache.images || [];\r\n  }\r\n  if (cache.images) return cache.images;\r\n\r\n  let imagesRaw: unknown;\r\n  try {\r\n    imagesRaw = await fetchImages();\r\n  } catch {\r\n    imagesRaw = [];\r\n  }\r\n  const images = Array.isArray(imagesRaw) ? (imagesRaw as any[]) : [];\r\n  cache.images = images;\r\n  return images;\r\n}\r\n\r\n/** Convenience: ensure both icons + images (with in-flight dedupe) */\r\nexport async function ensureDynamicPreload(): Promise<Cache> {\r\n  if (cache.icons && cache.images) return cache;\r\n  if (inFlight) return inFlight;\r\n\r\n  inFlight = Promise.all([ensureIconsPreload(), ensureImagesPreload()])\r\n    .then(([icons, images]) => {\r\n      cache = { icons, images };\r\n      return cache;\r\n    })\r\n    .finally(() => {\r\n      inFlight = null;\r\n    });\r\n\r\n  return inFlight;\r\n}\r\n\r\n// Optional: hydrate from SSR\r\ndeclare global {\r\n  interface Window {\r\n    __DYNAMIC_PRELOAD__?: Cache;\r\n  }\r\n}\r\nif (typeof window !== 'undefined' && (window as any).__DYNAMIC_PRELOAD__) {\r\n  primeFromSSR((window as any).__DYNAMIC_PRELOAD__);\r\n}\r\n","// src/ssr/projects/dynamic.enhancer.tsx\r\nimport React, { useEffect, useLayoutEffect, useRef, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { useDynamicOverlay } from '../../utils/content-utility/dynamic-overlay';\r\nimport { useRealMobileViewport } from '../../utils/content-utility/real-mobile';\r\nimport LoadingHub from '../../utils/loading/loading-hub';\r\n\r\n// add: shared cache/dedupe + URL builder for LQ warm\r\nimport { ensureDynamicPreload } from '../../dynamic-app/preload-dynamic-app';\r\nimport { urlFor } from '../../utils/media-providers/image-builder';\r\n\r\ntype ShadowInboundProps = { onFocusChange?: (f: boolean) => void; onReady?: () => void };\r\ntype ShadowInboundType = React.ComponentType<ShadowInboundProps>;\r\n\r\nfunction scheduleIdle(cb: () => void, timeout = 2000): () => void {\r\n  const w = window as any;\r\n  if (typeof w.requestIdleCallback === 'function') {\r\n    const id = w.requestIdleCallback(cb, { timeout });\r\n    return () => w.cancelIdleCallback?.(id);\r\n  }\r\n  const t = window.setTimeout(cb, timeout);\r\n  return () => window.clearTimeout(t);\r\n}\r\n\r\n// ---- module-level dedupe so warm only runs once per page load\r\nlet warmedOnce = false;\r\nfunction warmDynamicLowQuality(maxUrls = 32) {\r\n  if (warmedOnce) return;\r\n  warmedOnce = true;\r\n\r\n  (async () => {\r\n    try {\r\n      const { images } = await ensureDynamicPreload(); // deduped at source\r\n      if (!Array.isArray(images) || images.length === 0) return;\r\n\r\n      // Collect LQ URLs for both image1 and image2, then cap\r\n      const urls: string[] = [];\r\n      for (const it of images) {\r\n        const s1 = it?.image1 ? urlFor(it.image1).width(320).quality(35).auto('format').url() : null;\r\n        const s2 = it?.image2 ? urlFor(it.image2).width(320).quality(35).auto('format').url() : null;\r\n        if (s1) urls.push(s1);\r\n        if (s2) urls.push(s2);\r\n        if (urls.length >= maxUrls) break;\r\n      }\r\n\r\n      const head = document.head;\r\n      const seen = new Set<string>();\r\n\r\n      for (const src of urls) {\r\n        if (!src || seen.has(src)) continue;\r\n        seen.add(src);\r\n\r\n        // <link rel=\"preload\" as=\"image\"> (avoid duplicates)\r\n        if (!document.querySelector(`link[rel=\"preload\"][as=\"image\"][href=\"${src}\"]`)) {\r\n          const link = document.createElement('link');\r\n          link.rel = 'preload';\r\n          link.as = 'image';\r\n          link.href = src;\r\n          link.crossOrigin = 'anonymous';\r\n          // TS-safe way to hint priority\r\n          link.setAttribute('fetchpriority', 'low');\r\n          head.appendChild(link);\r\n        }\r\n\r\n        // Kick actual network regardless of preload support\r\n        const img = new Image();\r\n        img.decoding = 'async';\r\n        img.crossOrigin = 'anonymous';\r\n        img.src = src;\r\n      }\r\n    } catch {\r\n      /* ignore warm errors */\r\n    }\r\n  })();\r\n}\r\n\r\nconst DynamicEnhancer: React.FC = () => {\r\n  // ----- find SSR nodes\r\n  const frameRef = useRef<HTMLElement | null>(null);\r\n  const [overlayEl, setOverlayEl] = useState<HTMLElement | null>(null);\r\n\r\n  useLayoutEffect(() => {\r\n    const img = document.getElementById('dynamic-device-frame') as HTMLElement | null;\r\n    frameRef.current = img;\r\n    const overlay = img?.closest('.device-wrapper')?.querySelector('.screen-overlay') as HTMLElement | null;\r\n    setOverlayEl(overlay ?? null);\r\n  }, []);\r\n\r\n  // ----- overlay sizing\r\n  const overlaySize = useDynamicOverlay(frameRef);\r\n  const isRealMobile = useRealMobileViewport();\r\n\r\n  useEffect(() => {\r\n    if (!overlayEl) return;\r\n    const isPhone = window.matchMedia('(max-width: 767.98px)').matches;\r\n\r\n    if (isPhone) {\r\n      overlayEl.style.width = `${overlaySize.width}px`;\r\n      overlayEl.style.height = isRealMobile\r\n        ? `${overlaySize.heightSet1}svh`\r\n        : `${overlaySize.heightSet2}px`;\r\n    } else {\r\n      overlayEl.style.removeProperty('width');\r\n      overlayEl.style.removeProperty('height');\r\n    }\r\n  }, [overlayEl, overlaySize.width, overlaySize.heightSet1, overlaySize.heightSet2, isRealMobile]);\r\n\r\n  // ----- prewarm low-quality images (SSR path needs this; client-only path will no-op thanks to warmedOnce)\r\n  useEffect(() => {\r\n    // Gate by visibility with idle fallback, same as mounting\r\n    const container = document.getElementById('block-dynamic');\r\n    let cancelIdle: (() => void) | null = null;\r\n    let io: IntersectionObserver | null = null;\r\n\r\n    const run = () => warmDynamicLowQuality(32);\r\n\r\n    if (!container || typeof IntersectionObserver === 'undefined') {\r\n      // No IO → just warm on idle\r\n      cancelIdle = scheduleIdle(run, 500);\r\n    } else {\r\n      io = new IntersectionObserver(\r\n        (entries) => {\r\n          if (entries[0]?.isIntersecting) {\r\n            run();\r\n            io?.disconnect();\r\n          }\r\n        },\r\n        { root: null, rootMargin: '600px 0px', threshold: 0 }\r\n      );\r\n      io.observe(container);\r\n      // backstop so we still warm if user never scrolls\r\n      cancelIdle = scheduleIdle(run, 1200);\r\n    }\r\n\r\n    return () => {\r\n      io?.disconnect();\r\n      cancelIdle?.();\r\n    };\r\n  }, []);\r\n\r\n  // ----- gate mounting of shadow app\r\n  const [shouldMountShadow, setShouldMountShadow] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const container = document.getElementById('block-dynamic');\r\n    if (!container) { setShouldMountShadow(true); return; }\r\n\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => {\r\n        if (entry.intersectionRatio >= 0.3) {\r\n          setShouldMountShadow(true);\r\n          io.disconnect();\r\n        }\r\n      },\r\n      { threshold: [0, 0.3] }\r\n    );\r\n    io.observe(container);\r\n\r\n    const cancel = scheduleIdle(() => setShouldMountShadow(true), 2000);\r\n    return () => { io.disconnect(); cancel(); };\r\n  }, []);\r\n\r\n  // ----- lazy import\r\n  const [ShadowInbound, setShadowInbound] = useState<ShadowInboundType | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (!shouldMountShadow) return;\r\n    let alive = true;\r\n    import('../../dynamic-app/dynamic-app-shadow.jsx')\r\n      .then(m => { if (alive) setShadowInbound(() => m.default as ShadowInboundType); })\r\n      .catch(err => console.warn('[DynamicEnhancer] shadow import failed:', err));\r\n    return () => { alive = false; };\r\n  }, [shouldMountShadow]);\r\n\r\n  // ----- loader visibility\r\n  const [showLoader, setShowLoader] = useState(false); // start hidden until we begin mount\r\n  const watchdogRef = useRef<number | null>(null);\r\n\r\n  // when we start mounting, show loader (and arm watchdog)\r\n  useEffect(() => {\r\n    if (!shouldMountShadow) return;\r\n    setShowLoader(true);\r\n    if (watchdogRef.current) window.clearTimeout(watchdogRef.current);\r\n    watchdogRef.current = window.setTimeout(() => {\r\n      // fail-safe: hide after 8s even if onReady never fires\r\n      setShowLoader(false);\r\n      hideSsrSpinner();\r\n    }, 8000);\r\n    return () => {\r\n      if (watchdogRef.current) {\r\n        window.clearTimeout(watchdogRef.current);\r\n        watchdogRef.current = null;\r\n      }\r\n    };\r\n  }, [shouldMountShadow]);\r\n\r\n  // listen to global hydrated event (secondary path)\r\n  useEffect(() => {\r\n    const onHydrated = () => {\r\n      setShowLoader(false);\r\n      hideSsrSpinner();\r\n    };\r\n    window.addEventListener('dynamic-app:hydrated', onHydrated as EventListener);\r\n    return () => window.removeEventListener('dynamic-app:hydrated', onHydrated as EventListener);\r\n  }, []);\r\n\r\n  const hideSsrSpinner = () => {\r\n    const loader = document.getElementById('dynamic-overlay-loader');\r\n    if (loader) loader.style.display = 'none';\r\n  };\r\n\r\n  if (!overlayEl) return null;\r\n\r\n  const handleReady = () => {\r\n    setShowLoader(false);\r\n    hideSsrSpinner();\r\n    window.dispatchEvent(new CustomEvent('dynamic-app:hydrated'));\r\n  };\r\n\r\n  return createPortal(\r\n    <>\r\n      {showLoader && (\r\n        <div className=\"loading-hub-overlay\">\r\n          <LoadingHub\r\n            className=\"loading-hub--dynamic loading-hub--center\"\r\n            keyword=\"dynamic\"\r\n            lines={[\r\n              'Measuring app frame…',\r\n              'Creating shadow root…',\r\n              'Injecting app styles…',\r\n              'Loading SVG icons…',\r\n              'Mounting app shell…',\r\n              'Wiring observers and input…',\r\n            ]}\r\n            minHeight={72}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {ShadowInbound && shouldMountShadow && (\r\n        <ShadowInbound onFocusChange={() => {}} onReady={handleReady} />\r\n      )}\r\n    </>,\r\n    overlayEl\r\n  );\r\n};\r\n\r\nexport default DynamicEnhancer;\r\n","import { useEffect, useState } from 'react';\r\n\r\nexport function useDynamicOverlay(frameRef: React.RefObject<HTMLElement>) {\r\n  const [style, setStyle] = useState<{\r\n    width: number;\r\n    heightSet1: number;\r\n    heightSet2: number;\r\n  }>({\r\n    width: 0,\r\n    heightSet1: 0,\r\n    heightSet2: 0,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const update = () => {\r\n      if (!frameRef.current) return;\r\n\r\n      const rect = frameRef.current.getBoundingClientRect();\r\n      const aspect = rect.width / rect.height;\r\n\r\n      // Aspect ratio breakpoints\r\n      const minAspect = 1.5 / 6.5; // ~0.2307\r\n      const maxAspect = 3.3 / 6.5; // ~0.5077\r\n\r\n      // Width range (shared)\r\n      const minWidth = 150;\r\n      const maxWidth = 320;\r\n\r\n      // Height range set 1 (your current svh-based values)\r\n      const minHeightSet1 = 63;\r\n      const maxHeightSet1 = 93;\r\n\r\n      // Height range set 2 (original px-based)\r\n      const minHeightSet2 = 280;\r\n      const maxHeightSet2 = 610;\r\n\r\n      // --- Aspect ratio-based lerp ---\r\n      let width: number;\r\n      let height1: number;\r\n      let height2: number;\r\n\r\n      if (aspect <= minAspect) {\r\n        width = minWidth;\r\n        height1 = minHeightSet1;\r\n        height2 = minHeightSet2;\r\n      } else if (aspect >= maxAspect) {\r\n        width = maxWidth;\r\n        height1 = maxHeightSet1;\r\n        height2 = maxHeightSet2;\r\n      } else {\r\n        const t = (aspect - minAspect) / (maxAspect - minAspect);\r\n        width = minWidth + (maxWidth - minWidth) * t;\r\n        height1 = minHeightSet1 + (maxHeightSet1 - minHeightSet1) * t;\r\n        height2 = minHeightSet2 + (maxHeightSet2 - minHeightSet2) * t;\r\n      }\r\n\r\n      // --- Absolute height multiplier (0 → 2 over 0–1300px) ---\r\n      const minFrameHeight = 0;\r\n      const maxFrameHeight = 1300;\r\n      const minMultiplier = 0;\r\n      const maxMultiplier = 2;\r\n\r\n      const clampedHeight = Math.min(Math.max(rect.height, minFrameHeight), maxFrameHeight);\r\n      const heightT = (clampedHeight - minFrameHeight) / (maxFrameHeight - minFrameHeight);\r\n      const heightMultiplier = minMultiplier + (maxMultiplier - minMultiplier) * heightT;\r\n\r\n      // Apply multiplier\r\n      width *= heightMultiplier;\r\n      height1 *= heightMultiplier;\r\n      height2 *= heightMultiplier;\r\n\r\n      setStyle({\r\n        width,\r\n        heightSet1: height1,\r\n        heightSet2: height2,\r\n      });\r\n    };\r\n\r\n    update();\r\n    window.addEventListener('resize', update);\r\n    window.addEventListener('orientationchange', update);\r\n    return () => {\r\n      window.removeEventListener('resize', update);\r\n      window.removeEventListener('orientationchange', update);\r\n    };\r\n  }, [frameRef]);\r\n\r\n  return style; // { width, heightSet1, heightSet2 }\r\n}\r\n","// useRealMobileViewport.ts\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport function useRealMobileViewport() {\r\n  const [isRealMobile, setIsRealMobile] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const checkMobile = () => {\r\n      const touch = navigator.maxTouchPoints > 0;\r\n      const coarse = window.matchMedia?.('(pointer: coarse)').matches ?? false;\r\n      const width = window.innerWidth;\r\n      const ua = navigator.userAgent || navigator.vendor || (window as any).opera;\r\n\r\n      // iOS detection (iPhone / iPad)\r\n      const isIOS = /iPad|iPhone|iPod/.test(ua) ||\r\n        (navigator.platform === 'MacIntel' && touch); // iPadOS pretends to be Mac\r\n\r\n      // Android detection\r\n      const isAndroid = /Android/.test(ua);\r\n\r\n      // Consider it real mobile if:\r\n      // - Touch exists, and viewport is small, or\r\n      // - Known mobile UA\r\n      const realMobile =\r\n        (touch && width <= 1024) ||\r\n        isIOS ||\r\n        isAndroid ||\r\n        coarse;\r\n\r\n      setIsRealMobile(realMobile);\r\n    };\r\n\r\n    checkMobile();\r\n    window.addEventListener('resize', checkMobile);\r\n    window.addEventListener('orientationchange', checkMobile);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', checkMobile);\r\n      window.removeEventListener('orientationchange', checkMobile);\r\n    };\r\n  }, []);\r\n\r\n  return isRealMobile;\r\n}\r\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport '../../styles/loading-hub.css';\r\n\r\ntype LoadingHubProps = {\r\n  keyword?: string;\r\n  lines?: string[];\r\n  minHeight?: number | string;\r\n  className?: string;\r\n  ariaLabel?: string;\r\n  progress?: number | null;\r\n  cycleMs?: number;\r\n  animMs?: number;\r\n  /** Delay before showing loader (ms) */\r\n  delayMs?: number;\r\n};\r\n\r\nexport default function LoadingHub({\r\n  keyword,\r\n  lines = ['Loading…'],\r\n  minHeight = 160,\r\n  className = '',\r\n  ariaLabel = 'Loading',\r\n  progress = null,\r\n  cycleMs = 1400,\r\n  animMs = 900,\r\n  delayMs = 200,\r\n}: LoadingHubProps) {\r\n  const [lineIndex, setLineIndex] = useState(0);\r\n  const [show, setShow] = useState(false);\r\n\r\n  // --- delay before showing loader ---\r\n  useEffect(() => {\r\n    const t = setTimeout(() => setShow(true), delayMs);\r\n    return () => clearTimeout(t);\r\n  }, [delayMs]);\r\n\r\n  // rotate through provided lines\r\n  const hasMultiple = lines.length > 1;\r\n  useEffect(() => {\r\n    if (!hasMultiple) return;\r\n    const t = setInterval(() => {\r\n      setLineIndex((i) => (i + 1) % lines.length);\r\n    }, cycleMs);\r\n    return () => clearInterval(t);\r\n  }, [hasMultiple, lines.length, cycleMs]);\r\n\r\n  // Avoid reflow: lock container height\r\n  const style = useMemo<React.CSSProperties>(() => {\r\n    const h = typeof minHeight === 'number' ? `${minHeight}px` : (minHeight ?? 'auto');\r\n    return { minHeight: h };\r\n  }, [minHeight]);\r\n\r\n  // SR-only progressive percent\r\n  const srRef = useRef<HTMLSpanElement>(null);\r\n  useEffect(() => {\r\n    if (progress == null || !srRef.current) return;\r\n    srRef.current.textContent = `${Math.round(progress)}%`;\r\n  }, [progress]);\r\n\r\n  if (!show) {\r\n    // render an invisible placeholder with locked height\r\n    return <div style={style} aria-hidden=\"true\" />;\r\n  }\r\n\r\n  return (\r\n    <div\r\n      className={`loading-hub loading-hub--text ${className || ''}`}\r\n      style={style}\r\n      role=\"status\"\r\n      aria-live=\"polite\"\r\n      aria-label={ariaLabel}\r\n      data-keyword={keyword || undefined}\r\n      data-anim-ms={animMs}\r\n    >\r\n      <div className=\"loading-hub__copy\" aria-hidden={false}>\r\n        <h2 key={lineIndex} className=\"loading-hub__line\">\r\n          {lines[lineIndex]}\r\n        </h2>\r\n\r\n        {progress != null && (\r\n          <div className=\"loading-hub__progress\" aria-hidden=\"true\">\r\n            {Math.round(progress)}%\r\n          </div>\r\n        )}\r\n\r\n        <span className=\"sr-only\" ref={srRef} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["fetchSVGIcons","fetchImages","cache","inFlight","getPreloadedDynamicApp","primeFromSSR","data","toIconMap","list","reduce","acc","it","title","val","icon","url","length","whenDynamicPreloadReady","icons","images","ensureIconsPreload","iconsRaw","Array","isArray","ensureImagesPreload","imagesRaw","ensureDynamicPreload","Promise","all","then","finally","window","__DYNAMIC_PRELOAD__","React","useEffect","useLayoutEffect","useRef","useState","createPortal","useDynamicOverlay","useRealMobileViewport","LoadingHub","urlFor","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","scheduleIdle","cb","timeout","w","requestIdleCallback","id","cancelIdleCallback","t","setTimeout","clearTimeout","warmedOnce","warmDynamicLowQuality","maxUrls","urls","s1","image1","width","quality","auto","s2","image2","push","head","document","seen","Set","src","has","add","querySelector","link","createElement","rel","as","href","crossOrigin","setAttribute","appendChild","img","Image","decoding","DynamicEnhancer","frameRef","overlayEl","setOverlayEl","getElementById","current","overlay","closest","overlaySize","isRealMobile","isPhone","matchMedia","matches","style","height","heightSet1","heightSet2","removeProperty","container","cancelIdle","io","run","IntersectionObserver","entries","isIntersecting","disconnect","root","rootMargin","threshold","observe","shouldMountShadow","setShouldMountShadow","entry","intersectionRatio","cancel","ShadowInbound","setShadowInbound","alive","m","default","catch","err","console","warn","showLoader","setShowLoader","watchdogRef","hideSsrSpinner","onHydrated","addEventListener","removeEventListener","loader","display","handleReady","dispatchEvent","CustomEvent","children","className","keyword","lines","minHeight","onFocusChange","onReady","setStyle","update","rect","getBoundingClientRect","aspect","minAspect","maxAspect","minWidth","maxWidth","minHeightSet1","maxHeightSet1","minHeightSet2","maxHeightSet2","height1","height2","minFrameHeight","maxFrameHeight","minMultiplier","maxMultiplier","clampedHeight","Math","min","max","heightT","heightMultiplier","setIsRealMobile","checkMobile","touch","navigator","maxTouchPoints","coarse","innerWidth","ua","userAgent","vendor","opera","isIOS","test","platform","isAndroid","realMobile","useMemo","ariaLabel","progress","cycleMs","animMs","delayMs","lineIndex","setLineIndex","show","setShow","hasMultiple","setInterval","i","clearInterval","h","srRef","textContent","round","role","undefined","ref"],"sourceRoot":""}