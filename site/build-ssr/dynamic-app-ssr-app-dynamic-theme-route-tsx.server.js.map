{"version":3,"file":"dynamic-app-ssr-app-dynamic-theme-route-tsx.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/lib/colorString.ts","webpack://personal-site/./src/dynamic-app/lib/documentObserver.ts","webpack://personal-site/./src/dynamic-app/lib/svg-icon-map.ts","webpack://personal-site/./src/dynamic-app/preload-dynamic-app-route.ts","webpack://personal-site/./src/dynamic-app/ssr-app/dynamic-theme.route.tsx","webpack://personal-site/./src/ssr/dynamic-app/UIcards+sort.tsx","webpack://personal-site/./src/ssr/logic/dynamic-alt-observer.ts","webpack://personal-site/./src/utils/context-providers/shadow-root-context.tsx","webpack://personal-site/./src/utils/context-providers/style-injector.ts"],"sourcesContent":["// Student → color set mapping\r\nexport const colorMapping: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu ': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson ': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao ': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n\r\nexport const colorMapping2: Record<string, [string, string, string, string]> = {\r\n  'Yiner Xu': ['#e9b2c2', '#ffc3d4', '#5f4f53', '#ffc9d8'],\r\n  'Simone Schwartz': ['#d2b098', '#f0be9b', '#5b4e44', '#f2c5a5'],\r\n  'Seth Abrahamson': ['#a9a9a9', '#b9b9b9', '#292929', '#c0c0c0'],\r\n  'Sanna Anwar': ['#e9d0a0', '#ffe4af', '#2f2d28', '#ffe7b7'],\r\n  'Javi Ortiz': ['#e9afbd', '#ffbfcf', '#2f2a2b', '#ffc5d4'],\r\n  'Janhvi Gokalgandhi': ['#a0e1e9', '#aff7ff', '#282e2f', '#b7f8ff'],\r\n  'Andrew Adamides': ['#bef9da', '#7ca08d', '#262a28', '#9dccb4'],\r\n  'Shozab Raza': ['#e9e0a7', '#fff6b6', '#2f2e29', '#fff7bd'],\r\n  'Baopu Wang': ['#b3c2e9', '#c4d4ff', '#4f535f', '#cad8ff'],\r\n  'Efe Ozalp': ['#6fc1e9', '#78d3ff', '#242b2f', '#85d7ff'],\r\n  'Harry Liao': ['#abcdb2', '#b5e7be', '#292d2a', '#bceac5'],\r\n  'Jawad Naik': ['#97cfac', '#9bedb9', '#272d29', '#a5efc0'],\r\n};\r\n\r\n","// setupIntersectionObserver.ts\r\nlet observer: IntersectionObserver | null = null;\r\n\r\nconst setupIntersectionObserver = (pauseAnimation: boolean, rootElement: Document | ShadowRoot = document) => {\r\n  if (observer) {\r\n    observer.disconnect();\r\n    observer = null;\r\n  }\r\n\r\n  if (pauseAnimation) return;\r\n\r\n  const applyTransform = (percentage: number, imageContainer: HTMLElement, imageContainer2: HTMLElement) => {\r\n    if (!imageContainer || !imageContainer2) return;\r\n\r\n    let imageContainerTransform = 'translate(0em, 0em)';\r\n    let imageContainer2Transform = 'translate(1em, -27.8em)';\r\n    let imageContainerZIndex = '5';\r\n    let imageContainer2ZIndex = '1';\r\n\r\n    const width = window.innerWidth;\r\n\r\n    if (width <= 767) {\r\n      if (percentage > 0.35) {\r\n        imageContainerTransform = 'translate(1em, 1.5em)';\r\n        imageContainer2Transform = 'translate(-1em, -29.5em)';\r\n        imageContainerZIndex = '1';\r\n        imageContainer2ZIndex = '5';\r\n      } else if (percentage > 0.15) {\r\n        imageContainerTransform = 'translate(0.5em, 0.75em)';\r\n        imageContainer2Transform = 'translate(-0.5em, -28.9em)';\r\n      } else {\r\n        imageContainer2Transform = 'translate(0em, -28.4em)';\r\n      }\r\n    } else if (width <= 1024) {\r\n      if (percentage > 0.3) {\r\n        imageContainerTransform = 'translate(-1em, 0em)';\r\n        imageContainer2Transform = 'translate(0em, -29em)';\r\n        imageContainerZIndex = '1';\r\n        imageContainer2ZIndex = '5';\r\n      } else if (percentage > 0.15) {\r\n        imageContainerTransform = 'translate(0em, 1em)';\r\n        imageContainer2Transform = 'translate(-1em, -28em)';\r\n        imageContainerZIndex = '5';\r\n        imageContainer2ZIndex = '1';\r\n      } else if (percentage <= 0.15) {\r\n        imageContainerTransform = 'translate(-1em, 0em)';\r\n        imageContainer2Transform = 'translate(0em, -29em)';\r\n        imageContainerZIndex = '5';\r\n        imageContainer2ZIndex = '1';\r\n      }\r\n    } else if (width > 1025) {\r\n      if (percentage > 0.5) {\r\n        imageContainerTransform = 'translate(0em, 0em)';\r\n        imageContainer2Transform = 'translate(1em, -27.2em)';\r\n        imageContainerZIndex = '1';\r\n        imageContainer2ZIndex = '5';\r\n      } else if (percentage > 0.25) {\r\n        imageContainerTransform = 'translate(1em, 1em)';\r\n        imageContainer2Transform = 'translate(0em, -26em)';\r\n        imageContainerZIndex = '5';\r\n        imageContainer2ZIndex = '1';\r\n      } else if (percentage >= 0) {\r\n        imageContainerTransform = 'translate(0em, 0em)';\r\n        imageContainer2Transform = 'translate(1em, -27em)';\r\n        imageContainerZIndex = '5';\r\n        imageContainer2ZIndex = '1';\r\n      }\r\n    }\r\n\r\n    imageContainer.style.transform = imageContainerTransform;\r\n    imageContainer.style.zIndex = imageContainerZIndex;\r\n    imageContainer2.style.transform = imageContainer2Transform;\r\n    imageContainer2.style.zIndex = imageContainer2ZIndex;\r\n  };\r\n\r\n  const observerCallback: IntersectionObserverCallback = (entries) => {\r\n    entries.forEach((entry) => {\r\n      const element = entry.target as HTMLElement;\r\n      const imageContainer = element.querySelector('.image-container') as HTMLElement;\r\n      const imageContainer2 = element.querySelector('.image-container2') as HTMLElement;\r\n\r\n      const rect = element.getBoundingClientRect();\r\n      const vh = window.innerHeight;\r\n      const vc = vh / 1.6;\r\n      const percentage = Math.max(0, Math.min(rect.height, vc - rect.top)) / rect.height;\r\n\r\n      applyTransform(percentage, imageContainer, imageContainer2);\r\n    });\r\n  };\r\n\r\n  const observerOptions: IntersectionObserverInit = {\r\n    threshold: Array.from({ length: 101 }, (_, i) => i / 100),\r\n  };\r\n\r\n  observer = new IntersectionObserver(observerCallback, observerOptions);\r\n\r\n  const cards = rootElement.querySelectorAll('.card-container');\r\n  cards.forEach((card, index) => {\r\n    if (index < 3) {\r\n      const rect = card.getBoundingClientRect();\r\n      const vh = window.innerHeight;\r\n      const vc = vh / 2;\r\n      const percentage = Math.max(0, Math.min(rect.height, vc - rect.top)) / rect.height;\r\n\r\n      const img1 = card.querySelector('.image-container') as HTMLElement;\r\n      const img2 = card.querySelector('.image-container2') as HTMLElement;\r\n      applyTransform(percentage, img1, img2);\r\n    }\r\n\r\n    observer.observe(card);\r\n  });\r\n};\r\n\r\nexport default setupIntersectionObserver;\r\n","// Reusable helpers for turning icon payloads into safe HTML strings\r\n\r\nexport type IconLike = { title?: string; icon?: string; url?: string };\r\n\r\n/** remove BOM, <?xml …?>, <!DOCTYPE …> so innerHTML gets a clean <svg> root */\r\nexport const stripSvgPreamble = (s = '') =>\r\n  s\r\n    .replace(/^\\uFEFF/, '')\r\n    .replace(/^\\s*<\\?xml[\\s\\S]*?\\?>\\s*/i, '')\r\n    .replace(/^\\s*<!DOCTYPE[\\s\\S]*?>\\s*/i, '')\r\n    .trim();\r\n\r\nexport const isInlineSvg = (s?: string) => {\r\n  if (typeof s !== 'string') return false;\r\n  const t = stripSvgPreamble(s);\r\n  return /^\\s*<svg[\\s\\S]*<\\/svg>\\s*$/i.test(t);\r\n};\r\n\r\nexport const asInlineSvg = (s?: string) => (isInlineSvg(s) ? stripSvgPreamble(s!) : '');\r\n\r\nexport const escapeAttr = (s: string) => String(s).replace(/\"/g, '&quot;');\r\n\r\nexport const toImgHtml = (src?: string) =>\r\n  typeof src === 'string' && src.trim()\r\n    ? `<img src=\"${escapeAttr(src)}\" alt=\"\" aria-hidden=\"true\" />`\r\n    : '';\r\n\r\n/** normalize a plain { name: value } map (from SSR/window) to safe HTML strings */\r\nexport function normalizeIconMap(raw?: Record<string, string>): Record<string, string> {\r\n  const out: Record<string, string> = {};\r\n  for (const [k, v] of Object.entries(raw || {})) {\r\n    out[k] = asInlineSvg(v) || toImgHtml(v);\r\n  }\r\n  return out;\r\n}\r\n\r\n/** build a client icon map from Sanity rows (prefer inline; else URL→<img>) */\r\nexport function toClientIconMap(list: IconLike[] = []): Record<string, string> {\r\n  const out: Record<string, string> = {};\r\n  for (const it of list) {\r\n    if (!it?.title) continue;\r\n    const inline = asInlineSvg(it.icon);\r\n    out[it.title] = inline || toImgHtml(it.url) || toImgHtml(it.icon);\r\n  }\r\n  return out;\r\n}\r\n","import fetchSVGIcons from './lib/fetchSVGIcons';\r\nimport { fetchImages } from './lib/fetchUser';\r\n\r\nexport type DynThemeCache = {\r\n  icons?: Record<string, string>;\r\n  images?: any[];\r\n  seed?: number; // informational only\r\n};\r\n\r\ntype IconLike = { title?: string; icon?: string; url?: string };\r\n\r\nlet cache: DynThemeCache = {};\r\nlet inFlight: Promise<DynThemeCache> | null = null;\r\n\r\nexport function getPreloadedDynamicTheme(): DynThemeCache {\r\n  return cache;\r\n}\r\n\r\nexport function primeDynamicThemeFromSSR(data?: Partial<DynThemeCache>) {\r\n  if (!data) return;\r\n  cache = { ...cache, ...data };\r\n}\r\n\r\nexport async function whenDynamicThemePreloadReady(): Promise<DynThemeCache> {\r\n  if (cache.icons && cache.images) return cache;\r\n  if (inFlight) {\r\n    await inFlight;\r\n    return cache;\r\n  }\r\n  return cache;\r\n}\r\n\r\nfunction toIconMap(list: IconLike[]): Record<string, string> {\r\n  return (list || []).reduce((acc, it) => {\r\n    if (!it?.title) return acc;\r\n    const val = it.icon ?? it.url;\r\n    if (typeof val === 'string' && val.length > 0) acc[it.title] = val;\r\n    return acc;\r\n  }, {} as Record<string, string>);\r\n}\r\n\r\nexport async function ensureDynamicThemeIcons(): Promise<Record<string, string>> {\r\n  if (!cache.icons && inFlight) {\r\n    await inFlight;\r\n    return cache.icons || {};\r\n  }\r\n  if (cache.icons) return cache.icons;\r\n\r\n  let iconsRaw: unknown = [];\r\n  try { iconsRaw = await fetchSVGIcons(); } catch {}\r\n  const list = Array.isArray(iconsRaw) ? (iconsRaw as IconLike[]) : [];\r\n  const icons = toIconMap(list);\r\n  cache.icons = icons;\r\n  return icons;\r\n}\r\n\r\n/**\r\n * IMPORTANT: no seeding/reshuffle here.\r\n * If SSR provided images, we keep them as-is.\r\n * If not, we fetch and keep the API order.\r\n */\r\nexport async function ensureDynamicThemeImages(): Promise<any[]> {\r\n  if (!cache.images && inFlight) {\r\n    await inFlight;\r\n    return cache.images || [];\r\n  }\r\n  if (cache.images) return cache.images;\r\n\r\n  let imagesRaw: unknown = [];\r\n  try { imagesRaw = await fetchImages(); } catch {}\r\n  const images = Array.isArray(imagesRaw) ? (imagesRaw as any[]) : [];\r\n  cache.images = images;\r\n  return cache.images;\r\n}\r\n\r\nexport async function ensureDynamicThemePreload(): Promise<DynThemeCache> {\r\n  if (cache.icons && cache.images) return cache;\r\n  if (inFlight) return inFlight;\r\n\r\n  inFlight = Promise\r\n    .all([ensureDynamicThemeIcons(), ensureDynamicThemeImages()])\r\n    .then(([icons, images]) => {\r\n      cache = { ...cache, icons, images };\r\n      return cache;\r\n    })\r\n    .finally(() => { inFlight = null; });\r\n\r\n  return inFlight;\r\n}\r\n\r\n/* ---- hydrate from SSR bootstrap (window.__DYNAMIC_THEME_PRELOAD__) ---- */\r\ndeclare global {\r\n  interface Window {\r\n    __DYNAMIC_THEME_PRELOAD__?: DynThemeCache;\r\n  }\r\n}\r\nif (typeof window !== 'undefined' && (window as any).__DYNAMIC_THEME_PRELOAD__) {\r\n  primeDynamicThemeFromSSR((window as any).__DYNAMIC_THEME_PRELOAD__);\r\n}\r\n","import React, { useEffect, useMemo, useRef, useState } from 'react';\r\nimport loadable from '@loadable/component';\r\nimport { createPortal } from 'react-dom';\r\nimport { useSsrData } from '../../utils/context-providers/ssr-data-context';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector';\r\n\r\nimport {\r\n  primeDynamicThemeFromSSR as primeFromSSR,\r\n  ensureDynamicThemePreload as ensureDynamicPreload,\r\n} from '../preload-dynamic-app-route';\r\nimport { enhanceDynamicThemeSSR } from '../../ssr/dynamic-app/UIcards+sort';\r\nimport { colorMapping } from '../../dynamic-app/lib/colorString';\r\nimport fetchSVGIcons from '../../dynamic-app/lib/fetchSVGIcons';\r\nimport miscCss from '../../styles/dynamic-app/misc.css?raw';\r\n\r\nimport {\r\n  normalizeIconMap,\r\n  toClientIconMap,\r\n} from '../../dynamic-app/lib/svg-icon-map';\r\nimport type { IconLike } from '../../dynamic-app/lib/svg-icon-map';\r\n\r\n// client-only chunks\r\nconst Navigation = loadable(() => import('../../dynamic-app/components/navigation'), { ssr: false });\r\nconst FireworksDisplay = loadable(() => import('../../dynamic-app/components/fireworksDisplay'), { ssr: false });\r\nconst Footer = loadable(() => import('../../dynamic-app/components/footer'), { ssr: false });\r\nconst TitleDivider = loadable(() => import('../../dynamic-app/components/title'), { ssr: false });\r\nconst PauseButton = loadable(() => import('../../dynamic-app/components/pauseButton'), { ssr: false });\r\n\r\n// SSR shell (UI cards + sort stub)\r\nconst DynamicTheme = loadable(() => import('../../DynamicTheme.jsx'), { ssr: true });\r\n\r\n/* ---------- portals ---------- */\r\nfunction NavigationPortal(props: {\r\n  items: any[];\r\n  arrow1?: string; // customArrowIcon2\r\n  arrow2?: string; // customArrowIcon\r\n  activeColor?: string;\r\n}) {\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  useStyleInjection(miscCss, 'dynamic-app-style-misc');\r\n  useEffect(() => { setTarget(document.getElementById('dynamic-nav-mount')); }, []);\r\n  if (!target) return null;\r\n  return createPortal(\r\n    <Navigation\r\n      items={props.items}\r\n      customArrowIcon2={props.arrow1}\r\n      customArrowIcon={props.arrow2}\r\n      activeColor={props.activeColor ?? '#FFFFFF'}\r\n      isInShadow={false}\r\n      scrollLockContainer={undefined}\r\n    />,\r\n    target\r\n  );\r\n}\r\n\r\nfunction FireworksPortal(props: {\r\n  items: any[];\r\n  onToggleFireworks?: (fn: (enabled: boolean) => void) => void;\r\n}) {\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  useEffect(() => { setTarget(document.getElementById('dynamic-fireworks-mount')); }, []);\r\n  if (!target) return null;\r\n  return createPortal(\r\n    <FireworksDisplay\r\n      colorMapping={colorMapping}\r\n      items={props.items}\r\n      activeColor=\"#FFFFFF\"\r\n      lastKnownColor=\"#FFFFFF\"\r\n      onToggleFireworks={props.onToggleFireworks || (() => {})}\r\n    />,\r\n    target\r\n  );\r\n}\r\n\r\nfunction TitlePortal(props: {\r\n  logoSvg?: string;\r\n  movingTextColors?: [string, string, string];\r\n  pauseAnimation?: boolean;\r\n}) {\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  useEffect(() => { setTarget(document.getElementById('dynamic-title-mount')); }, []);\r\n  if (!target) return null;\r\n  return createPortal(\r\n    <TitleDivider\r\n      svgIcon={props.logoSvg || ''}\r\n      movingTextColors={props.movingTextColors || ['#FFFFFF', '#FFFFFF', '#FFFFFF']}\r\n      pauseAnimation={!!props.pauseAnimation}\r\n    />,\r\n    target\r\n  );\r\n}\r\n\r\nfunction PausePortal(props: { onToggle: (isEnabled: boolean) => void }) {\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  useEffect(() => { setTarget(document.getElementById('dynamic-pause-mount')); }, []);\r\n  if (!target) return null;\r\n  return createPortal(\r\n    <div className=\"pause-button-wrapper\">\r\n      <PauseButton toggleP5Animation={props.onToggle} />\r\n    </div>,\r\n    target\r\n  );\r\n}\r\n\r\nfunction FooterPortal(props: {\r\n  arrow1?: string;         // customArrowIcon2\r\n  linkArrowIcon?: string;  // inline <svg> or <img>\r\n}) {\r\n  const [target, setTarget] = useState<HTMLElement | null>(null);\r\n  useEffect(() => { setTarget(document.getElementById('dynamic-footer-mount')); }, []);\r\n  if (!target) return null;\r\n  return createPortal(\r\n    <Footer\r\n      customArrowIcon2={props.arrow1}\r\n      linkArrowIcon={props.linkArrowIcon}\r\n    />,\r\n    target\r\n  );\r\n}\r\n\r\n/* ---------- route ---------- */\r\nexport default function DynamicThemeRoute() {\r\n  const ssr = useSsrData();\r\n  const preload = ssr?.preloaded?.dynamicTheme;\r\n\r\n  // state\r\n  const [items, setItems] = useState<any[]>(Array.isArray(preload?.images) ? preload!.images : []);\r\n  const [icons, setIcons] = useState<Record<string, string>>(normalizeIconMap(preload?.icons || {}));\r\n  const [pauseAnimation, setPauseAnimation] = useState(false);\r\n  const [activeColor, setActiveColor] = useState('#FFFFFF');\r\n\r\n  // wire PauseButton ↔ FireworksDisplay\r\n  const fwToggleRef = useRef<((enabled: boolean) => void) | null>(null);\r\n  const handleSetToggleFireworks = (fn: (enabled: boolean) => void) => { fwToggleRef.current = fn; };\r\n  const handlePauseToggle = (isEnabled: boolean) => {\r\n    // isEnabled=true means animations ON → pauseAnimation false\r\n    setPauseAnimation(!isEnabled);\r\n    try { fwToggleRef.current?.(isEnabled); } catch {}\r\n  };\r\n\r\n  // hydrate from SSR payload\r\n  useEffect(() => { if (preload) primeFromSSR(preload); }, [preload]);\r\n\r\n  // prime from window bootstrap if present\r\n  useEffect(() => {\r\n    const w = typeof window !== 'undefined' ? (window as any) : null;\r\n    const boot = w?.__DYNAMIC_THEME_PRELOAD__;\r\n    if (boot) {\r\n      if (Array.isArray(boot.images)) setItems(boot.images);\r\n      if (boot.icons) setIcons(normalizeIconMap(boot.icons));\r\n      primeFromSSR(boot);\r\n    }\r\n  }, []);\r\n\r\n  // client-only ensure (no reseed)\r\n  useEffect(() => {\r\n    let dead = false;\r\n    (async () => {\r\n      try {\r\n        const cache = await ensureDynamicPreload();\r\n        if (!dead && cache) {\r\n          if (!items.length && Array.isArray(cache.images)) setItems(cache.images);\r\n          if (!Object.keys(icons).length && cache.icons) setIcons(normalizeIconMap(cache.icons));\r\n        }\r\n      } catch {}\r\n    })();\r\n    return () => { dead = true; };\r\n  }, []); // once\r\n\r\n  // FINAL FALLBACK: fetch icons on client if still missing\r\n  useEffect(() => {\r\n    let dead = false;\r\n    (async () => {\r\n      if (icons && (icons['arrow1'] || icons['arrow2'] || icons['link-icon'] || icons['logo-small-1'])) return;\r\n      try {\r\n        const raw = (await fetchSVGIcons().catch(() => [])) as IconLike[];\r\n        if (!dead && Array.isArray(raw)) {\r\n          const map = toClientIconMap(raw);\r\n          if (Object.keys(map).length) setIcons(prev => ({ ...map, ...prev }));\r\n        }\r\n      } catch {}\r\n    })();\r\n    return () => { dead = true; };\r\n  }, [icons]);\r\n\r\n  // enhance SSR snapshot (HQ image upgrade + DOM-driven SortBy + color from order)\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined')\r\n      enhanceDynamicThemeSSR({\r\n        onColorChange: (alt, colors) => {\r\n          if (Array.isArray(colors) && colors[2]) setActiveColor(colors[2]);\r\n        },\r\n      });\r\n  }, []);\r\n\r\n  // props for portals\r\n  const propsMemo = useMemo(() => ({\r\n    items,\r\n    arrow1: icons['arrow1'] || '',            // Navigation.customArrowIcon2 + Footer.customArrowIcon2\r\n    arrow2: icons['arrow2'] || '',            // Navigation.customArrowIcon\r\n    linkArrowIcon: icons['link-icon'] || '',  // Footer.linkArrowIcon\r\n    logoSmall: icons['logo-small-1'] || '',   // TitleDivider.svgIcon\r\n  }), [items, icons]);\r\n\r\n  return (\r\n    <>\r\n      <DynamicTheme />\r\n\r\n      <NavigationPortal\r\n        items={propsMemo.items}\r\n        arrow1={propsMemo.arrow1}\r\n        arrow2={propsMemo.arrow2}\r\n        activeColor={activeColor}\r\n      />\r\n\r\n      <FireworksPortal\r\n        items={propsMemo.items}\r\n        onToggleFireworks={handleSetToggleFireworks}\r\n      />\r\n\r\n      <TitlePortal\r\n        logoSvg={propsMemo.logoSmall}\r\n        movingTextColors={['#FFFFFF', '#FFFFFF', '#FFFFFF']}\r\n        pauseAnimation={pauseAnimation}\r\n      />\r\n\r\n      <PausePortal onToggle={handlePauseToggle} />\r\n\r\n      <FooterPortal\r\n        arrow1={propsMemo.arrow1}\r\n        linkArrowIcon={propsMemo.linkArrowIcon}\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { ensureDynamicThemePreload } from '../../dynamic-app/preload-dynamic-app-route';\r\nimport setupIntersectionObserver from '../../dynamic-app/lib/documentObserver';\r\nimport { createSsrAltObserver } from '../logic/dynamic-alt-observer';\r\nimport { colorMapping2 } from '../../dynamic-app/lib/colorString';\r\n\r\n/* =========================\r\n   Config / selectors\r\n   ========================= */\r\nconst SEL = {\r\n  list: '.UI-card-divider',\r\n  card: '.card-container',\r\n  imgPref: '.ui-image2',    // prefer this image\r\n  imgFallback: '.ui-image1' // fallback image\r\n};\r\n\r\n/* =========================\r\n   Helpers\r\n   ========================= */\r\n\r\n// normalize for safer alphabetic sorting (accent/case/numeric)\r\nfunction normalizeForSort(s?: string | null) {\r\n  return (s || '')\r\n    .normalize('NFD')\r\n    .replace(/[\\u0300-\\u036f]/g, '')\r\n    .toLocaleLowerCase('en');\r\n}\r\nfunction compareAsc(a: string, b: string) {\r\n  return normalizeForSort(a).localeCompare(normalizeForSort(b), 'en', {\r\n    sensitivity: 'base',\r\n    numeric: true,\r\n    ignorePunctuation: true,\r\n  });\r\n}\r\nfunction compareDesc(a: string, b: string) {\r\n  return -compareAsc(a, b);\r\n}\r\n\r\n// fresh shuffle each call (seedless)\r\nfunction shuffleArray<T>(arr: T[]): T[] {\r\n  const a = [...arr];\r\n  for (let i = a.length - 1; i > 0; i--) {\r\n    const j = Math.floor(Math.random() * (i + 1));\r\n    [a[i], a[j]] = [a[j], a[i]];\r\n  }\r\n  return a;\r\n}\r\n\r\n// get <img alt> from a card; prefer .ui-image2 then .ui-image1\r\nfunction getAltFromCard(cardEl: HTMLElement): string {\r\n  const img =\r\n    (cardEl.querySelector(SEL.imgPref) as HTMLImageElement | null) ||\r\n    (cardEl.querySelector(SEL.imgFallback) as HTMLImageElement | null);\r\n  return (img?.getAttribute('alt') || '').trim();\r\n}\r\n\r\n// ES2019-safe replaceAll via split/join\r\nfunction replaceAllCompat(h: string, n: string, r: string) {\r\n  return h.split(n).join(r);\r\n}\r\n\r\n// Retag index-based classes if you rely on them for styling\r\nfunction retagIndexClasses(cardEl: HTMLElement, oldIndex: number, newIndex: number) {\r\n  const rewrite = (el: Element) => {\r\n    const node = el as HTMLElement;\r\n    const cls = node.className;\r\n    if (typeof cls === 'string' && cls) {\r\n      let next = cls;\r\n      next = replaceAllCompat(next, `custom-card-${oldIndex}-2`, `custom-card-${newIndex}-2`);\r\n      next = replaceAllCompat(next, `custom-card-${oldIndex}`, `custom-card-${newIndex}`);\r\n      node.className = next;\r\n    }\r\n  };\r\n  rewrite(cardEl);\r\n  cardEl.querySelectorAll('*').forEach(rewrite);\r\n}\r\n\r\n// tiny debounce\r\nfunction debounce<F extends (...args: any[]) => void>(fn: F, ms = 120) {\r\n  let t: any;\r\n  return (...args: Parameters<F>) => {\r\n    clearTimeout(t);\r\n    t = setTimeout(() => fn(...args), ms);\r\n  };\r\n}\r\n\r\n// hex (#rrggbb) -> rgba(r,g,b,a) with fallback to original if parse fails\r\nfunction hexToRgba(hex: string, alpha = 0.65): string {\r\n  const m = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec((hex || '').trim());\r\n  if (!m) return hex;\r\n  const r = parseInt(m[1], 16);\r\n  const g = parseInt(m[2], 16);\r\n  const b = parseInt(m[3], 16);\r\n  return `rgba(${r}, ${g}, ${b}, ${alpha})`;\r\n}\r\n\r\n/* =========================\r\n   SortBy chrome color from current DOM order\r\n   ========================= */\r\n\r\n// Rule: ≥1025px → 3rd card, 768–1024 → 2nd card, <768 → 1st card.\r\n// Use that card’s alt → colorMapping[alt][1].\r\nfunction computeViewportIndex(width: number) {\r\n  return width >= 1025 ? 2 : width >= 768 ? 1 : 0;\r\n}\r\n\r\nfunction applySortChromeColorFromDomOrder(listContainer: HTMLElement, sortRoot: HTMLElement | null) {\r\n  if (!sortRoot || !listContainer) return;\r\n\r\n  const cards = Array.from(listContainer.querySelectorAll(SEL.card)) as HTMLElement[];\r\n  if (cards.length === 0) return;\r\n\r\n  const idx = computeViewportIndex(window.innerWidth);\r\n  const target = cards[idx];\r\n  if (!target) return;\r\n\r\n  const alt = getAltFromCard(target);\r\n  if (!alt) return;\r\n\r\n  const colors = (colorMapping2 as any)?.[alt];\r\n  const color = Array.isArray(colors) ? (colors[1] || null) : null;\r\n  if (!color) return;\r\n\r\n  const borderRgba = hexToRgba(color, 0.3);\r\n\r\n  (sortRoot as HTMLElement).style.border = `solid 1.6px ${borderRgba}`;\r\n  (sortRoot as HTMLElement).style.boxShadow = `\r\n    0 1px 8px rgba(0,0,0,0.1),\r\n    0 22px 8px rgba(0,0,0,0.08),\r\n    12px 12px ${color}\r\n  `;\r\n}\r\n\r\n/* =========================\r\n   Progressive HQ upgrade (visible first + background queue)\r\n   ========================= */\r\n\r\n// Quick pass: upgrade any images currently visible on screen\r\nfunction upgradeVisibleImages(container: HTMLElement | Document) {\r\n  const imgs = Array.from(container.querySelectorAll('img[data-src-full]')) as HTMLImageElement[];\r\n  const vh = window.innerHeight;\r\n  for (const img of imgs) {\r\n    const rect = img.getBoundingClientRect();\r\n    const visible = rect.bottom > 0 && rect.top < vh;\r\n    const full = (img.dataset as any)?.srcFull;\r\n    if (visible && full && img.src !== full) {\r\n      img.src = full;\r\n      img.removeAttribute('data-src-full');\r\n    }\r\n  }\r\n}\r\n\r\n// Preload a URL with low priority then resolve (no swap here)\r\nfunction preload(fullUrl: string) {\r\n  return new Promise<void>((resolve, reject) => {\r\n    const ghost = new Image();\r\n    try { (ghost as any).decoding = 'async'; } catch {}\r\n    try { (ghost as any).fetchPriority = 'low'; } catch {}\r\n    ghost.onload = () => resolve();\r\n    ghost.onerror = () => resolve(); // tolerate failures; keep LQ\r\n    ghost.src = fullUrl;\r\n  });\r\n}\r\n\r\n// Background queue that eventually swaps every remaining image\r\nlet _bgHQStarted = false;\r\nlet _bgCancel: (() => void) | null = null;\r\n\r\nfunction upgradeAllImagesInBackground(root: Document | HTMLElement, maxConcurrent = 3) {\r\n  if (_bgHQStarted) return _bgCancel || null;\r\n  _bgHQStarted = true;\r\n\r\n  const pool = new Set<Promise<any>>();\r\n  let cancelled = false;\r\n\r\n  const allImgs = Array.from(root.querySelectorAll('img[data-src-full]')) as HTMLImageElement[];\r\n\r\n  // Optional: prioritize by distance from viewport top (still “all”, just nicer order)\r\n  const vhMid = window.scrollY + window.innerHeight / 2;\r\n  allImgs.sort((a, b) => {\r\n    const ra = a.getBoundingClientRect(); const rb = b.getBoundingClientRect();\r\n    const ya = ra.top + window.scrollY; const yb = rb.top + window.scrollY;\r\n    return Math.abs(ya - vhMid) - Math.abs(yb - vhMid);\r\n  });\r\n\r\n  let index = 0;\r\n\r\n  const pump = () => {\r\n    if (cancelled) return;\r\n    while (pool.size < maxConcurrent && index < allImgs.length) {\r\n      const el = allImgs[index++];\r\n      const full = (el.dataset as any)?.srcFull;\r\n      if (!full) continue;\r\n\r\n      const task = preload(full).then(() => {\r\n        if (cancelled) return;\r\n        // If still pointing to LQ and not already swapped, replace\r\n        if (el.isConnected && el.getAttribute('data-src-full') === full) {\r\n          // keep lazy decoding; just change the source\r\n          el.src = full;\r\n          el.removeAttribute('data-src-full');\r\n        }\r\n      }).finally(() => {\r\n        pool.delete(task);\r\n        pump();\r\n      });\r\n\r\n      pool.add(task);\r\n    }\r\n  };\r\n\r\n  pump();\r\n\r\n  const cancel = () => { cancelled = true; };\r\n  _bgCancel = cancel;\r\n  return cancel;\r\n}\r\n\r\n/* =========================\r\n   Main enhancer (DOM-driven, seed-proof for A↔Z)\r\n   ========================= */\r\n\r\nexport function enhanceDynamicThemeSSR(opts: { onColorChange?: (alt: string, colors: string[]) => void } = {}) {\r\n  const { onColorChange } = opts;\r\n\r\n  const host = document.getElementById('dynamic-theme-ssr');\r\n  if (!host || (host as any).__enhanced) return;\r\n  (host as any).__enhanced = true;\r\n\r\n  // make the SSR section interactive now\r\n  host.classList.remove('ssr-initial');\r\n  (host as HTMLElement).style.pointerEvents = 'auto';\r\n\r\n  // If your CSS was disabling pointer events on the snapshot, force-enable:\r\n  const snapshot = (document.getElementById('dynamic-snapshot') as HTMLElement | null) || host;\r\n  if (snapshot) snapshot.style.pointerEvents = 'auto';\r\n\r\n  const listContainer = snapshot?.querySelector(SEL.list) as HTMLElement | null;\r\n  if (!listContainer) return;\r\n\r\n  // Sort UI bits\r\n  const sortRoot = document.querySelector('#dynamic-sortby-mount .custom-dropdown') as HTMLElement | null;\r\n  const selectEl = sortRoot?.querySelector('.custom-select');\r\n  const arrowEl = sortRoot?.querySelector('.custom-arrow');\r\n  const selectedValueEl = sortRoot?.querySelector('.selected-value h5');\r\n\r\n  let optionsEl = sortRoot?.querySelector('.options-container') as HTMLElement | null;\r\n  if (!optionsEl) {\r\n    optionsEl = document.createElement('div');\r\n    optionsEl.className = 'options-container';\r\n    optionsEl.style.display = 'none';\r\n    optionsEl.innerHTML = `\r\n      <div class=\"option selected\" data-value=\"random\">Randomized</div>\r\n      <div class=\"option\" data-value=\"titleAsc\">A to Z</div>\r\n      <div class=\"option\" data-value=\"titleDesc\">Z to A</div>\r\n    `;\r\n    sortRoot?.appendChild(optionsEl);\r\n  }\r\n\r\n  const openOptions = () => { optionsEl!.style.display = ''; arrowEl?.classList.add('open'); };\r\n  const closeOptions = () => { optionsEl!.style.display = 'none'; arrowEl?.classList.remove('open'); };\r\n  document.addEventListener('mousedown', (e) => { if (!sortRoot?.contains(e.target as Node)) closeOptions(); });\r\n  selectEl?.addEventListener('click', () => {\r\n    const isOpen = optionsEl!.style.display !== 'none';\r\n    isOpen ? closeOptions() : openOptions();\r\n  });\r\n\r\n  const setSelectedLabel = (mode: string) => {\r\n    if (!selectedValueEl) return;\r\n    selectedValueEl.textContent =\r\n      mode === 'titleAsc' ? 'A to Z' :\r\n      mode === 'titleDesc' ? 'Z to A' : 'Randomized';\r\n  };\r\n  const setSelectedClass = (mode: string) => {\r\n    optionsEl!.querySelectorAll('.option').forEach((o) => {\r\n      o.classList.toggle('selected', (o as HTMLElement).getAttribute('data-value') === mode);\r\n    });\r\n  };\r\n\r\n  // Base SSR enhancements (always root = document)\r\n  const prefersReduced = !!(window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches);\r\n  setupIntersectionObserver(prefersReduced, document);\r\n\r\n  // Observer for color dynamics\r\n  let altObs: ReturnType<typeof createSsrAltObserver> | null = null;\r\n  const rearmAlt = () => {\r\n    if (altObs) altObs.dispose();\r\n    altObs = createSsrAltObserver({\r\n      rootElement: document,\r\n      onActivate: (alt1: string) => {\r\n        const colors = (colorMapping2 as any)?.[alt1];\r\n        if (typeof onColorChange === 'function' && colors) onColorChange(alt1, colors);\r\n      },\r\n      onDeactivate: () => { /* no-op */ },\r\n    });\r\n  };\r\n\r\n  const afterReorder = () => {\r\n    // keep your transforms/images work\r\n    setupIntersectionObserver(true, document);\r\n    setupIntersectionObserver(false, document);\r\n\r\n    // ensure observer tracks current nodes\r\n    altObs?.rearm();\r\n\r\n    // apply SortBy color from current DOM order according to viewport rule\r\n    applySortChromeColorFromDomOrder(listContainer, sortRoot);\r\n\r\n    // visible first\r\n    upgradeVisibleImages(document);\r\n    // and make sure the background queue is running for the rest\r\n    upgradeAllImagesInBackground(document, 3);\r\n  };\r\n\r\n  // DOM-driven sort (seed-proof): use <img alt> from each card\r\n  optionsEl!.addEventListener('click', (e) => {\r\n    const opt = (e.target as HTMLElement).closest('.option');\r\n    if (!opt) return;\r\n\r\n    const mode = (opt.getAttribute('data-value') as 'random' | 'titleAsc' | 'titleDesc') || 'random';\r\n    const cards = Array.from(listContainer.querySelectorAll(SEL.card)) as HTMLElement[];\r\n\r\n    let ordered: HTMLElement[];\r\n    if (mode === 'random') {\r\n      ordered = shuffleArray(cards);\r\n    } else {\r\n      ordered = [...cards].sort((a, b) => {\r\n        const A = getAltFromCard(a);\r\n        const B = getAltFromCard(b);\r\n        return mode === 'titleAsc' ? compareAsc(A, B) : compareDesc(A, B);\r\n      });\r\n    }\r\n\r\n    // apply to DOM + keep index-based classes in sync\r\n    const frag = document.createDocumentFragment();\r\n    ordered.forEach((el, newIndex) => {\r\n      const idxClass = [...el.classList].find((c) => /^custom-card-\\d+$/.test(c));\r\n      const oldIndex = idxClass ? parseInt(idxClass.split('-').pop()!, 10) : -1;\r\n      if (oldIndex !== -1 && oldIndex !== newIndex) retagIndexClasses(el, oldIndex, newIndex);\r\n      frag.appendChild(el);\r\n    });\r\n    listContainer.appendChild(frag);\r\n\r\n    setSelectedLabel(mode);\r\n    setSelectedClass(mode);\r\n\r\n    closeOptions();\r\n    afterReorder();\r\n  });\r\n\r\n  // Recompute SortBy color on viewport resize (debounced)\r\n  const onResize = debounce(() => {\r\n    applySortChromeColorFromDomOrder(listContainer, sortRoot);\r\n    upgradeVisibleImages(document);\r\n    upgradeAllImagesInBackground(document, 3);\r\n  }, 150);\r\n  window.addEventListener('resize', onResize);\r\n\r\n  // Preload only to finish bootstrapping; color is from DOM order (not preload)\r\n  ensureDynamicThemePreload()\r\n    .finally(() => {\r\n      rearmAlt();\r\n      setSelectedLabel('random');\r\n      setSelectedClass('random');\r\n      // initial color from current DOM order\r\n      applySortChromeColorFromDomOrder(listContainer, sortRoot);\r\n      // visible images first\r\n      upgradeVisibleImages(document);\r\n      // then *everything else* via background queue\r\n      upgradeAllImagesInBackground(document, 3);\r\n    });\r\n\r\n  // optional cleanup (enable if your route unmounts)\r\n  // return () => { window.removeEventListener('resize', onResize); altObs?.dispose(); _bgCancel?.(); };\r\n}\r\n","// src/ssr/logic/dynamic-alt-observer.ts\r\n// Instance-scoped alt observer (mirrors your working setupAltObserver)\r\n\r\ntype AltObserverOpts = {\r\n  rootElement?: Document | HTMLElement;        // default: document\r\n  minActiveRatio?: number;                     // default: 0.10\r\n  onActivate: (altRaw: string) => void;        // REQUIRED\r\n  onDeactivate?: (altRaw: string) => void;\r\n};\r\n\r\ntype EntryLike = { target: Element; intersectionRatio: number };\r\n\r\nexport function createSsrAltObserver({\r\n  rootElement = document,\r\n  minActiveRatio = 0.10,\r\n  onActivate,\r\n  onDeactivate,\r\n}: AltObserverOpts) {\r\n  if (typeof onActivate !== 'function') {\r\n    throw new Error('createSsrAltObserver: onActivate callback is required');\r\n  }\r\n\r\n  // keep RAW alt (including trailing spaces), like the working version\r\n  let currentlyActiveAlt: string | null = null;\r\n  let highestVisibility = 0;\r\n  let debounceTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n  // 0..1 with 0.01 steps\r\n  const thresholds: number[] = Array.from({ length: 101 }, (_, i) => i / 100);\r\n\r\n  const getImageAlt = (cardEl: Element): string | null => {\r\n    const img =\r\n      (cardEl.querySelector('.ui-image2') as HTMLImageElement | null) ||\r\n      (cardEl.querySelector('.ui-image1') as HTMLImageElement | null);\r\n    return img ? img.getAttribute('alt') : null; // DO NOT trim\r\n  };\r\n\r\n  // Core logic operates on a simplified EntryLike[] so we can reuse it\r\n  const handleEntries = (entries: EntryLike[]) => {\r\n    // most-visible first\r\n    entries.sort((a, b) => b.intersectionRatio - a.intersectionRatio);\r\n\r\n    entries.forEach((entry) => {\r\n      const element = entry.target as HTMLElement;\r\n      const alt = getImageAlt(element);\r\n      if (alt == null) return;\r\n\r\n      const visibility = entry.intersectionRatio;\r\n\r\n      if (visibility > minActiveRatio && visibility > highestVisibility) {\r\n        if (currentlyActiveAlt !== alt) {\r\n          if (currentlyActiveAlt && typeof onDeactivate === 'function') {\r\n            try { onDeactivate(currentlyActiveAlt); } catch {}\r\n          }\r\n          try { onActivate(alt); } catch {}\r\n          currentlyActiveAlt = alt;\r\n          highestVisibility = visibility;\r\n        }\r\n      } else if (visibility <= minActiveRatio && currentlyActiveAlt === alt) {\r\n        if (typeof onDeactivate === 'function') {\r\n          try { onDeactivate(alt); } catch {}\r\n        }\r\n        currentlyActiveAlt = null;\r\n        highestVisibility = 0;\r\n      }\r\n    });\r\n  };\r\n\r\n  // Real IO -> adapt to EntryLike\r\n  const io = new IntersectionObserver(\r\n    (entries) => {\r\n      const simplified: EntryLike[] = entries.map((e) => ({\r\n        target: e.target,\r\n        intersectionRatio: e.intersectionRatio,\r\n      }));\r\n      handleEntries(simplified);\r\n    },\r\n    {\r\n      root: null,\r\n      rootMargin: '0px',\r\n      threshold: thresholds,\r\n    }\r\n  );\r\n\r\n  const observeAll = () => {\r\n    const cards = rootElement.querySelectorAll('.card-container');\r\n    cards.forEach((el) => io.observe(el));\r\n  };\r\n\r\n  const triggerInitial = () => {\r\n    if (debounceTimeout) clearTimeout(debounceTimeout);\r\n    debounceTimeout = setTimeout(() => {\r\n      const cards = Array.from(rootElement.querySelectorAll('.card-container'));\r\n      const viewportHeight = window.innerHeight;\r\n\r\n      // Synthetic first-pass, like your working code\r\n      const synthetic: EntryLike[] = cards.map((card) => {\r\n        const rect = (card as HTMLElement).getBoundingClientRect();\r\n        const visibility = Math.max(0, Math.min(rect.height, viewportHeight - rect.top) / rect.height);\r\n        return { target: card, intersectionRatio: visibility };\r\n      });\r\n\r\n      handleEntries(synthetic);\r\n    }, 50);\r\n  };\r\n\r\n  // bootstrap\r\n  observeAll();\r\n  triggerInitial();\r\n\r\n  return {\r\n    dispose() {\r\n      if (debounceTimeout) clearTimeout(debounceTimeout);\r\n      io.disconnect();\r\n      currentlyActiveAlt = null;\r\n      highestVisibility = 0;\r\n    },\r\n    rearm() {\r\n      io.disconnect();\r\n      observeAll();\r\n      triggerInitial();\r\n    },\r\n    debugState() {\r\n      return { currentlyActiveAlt, highestVisibility };\r\n    },\r\n  };\r\n}\r\n\r\nexport default createSsrAltObserver;\r\n","// src/utils/context-providers/shadow-root-context.tsx\r\nimport React, { createContext, useContext, useRef, ReactNode } from 'react';\r\n\r\ntype ShadowRootFn = () => ShadowRoot | null;\r\ntype StyleSheetRaw = string;\r\n\r\nconst hasDOM = typeof document !== 'undefined';\r\nconst hasConstructedSheets =\r\n  hasDOM &&\r\n  typeof (globalThis as any).Document !== 'undefined' &&\r\n  'adoptedStyleSheets' in (Document.prototype as any) &&\r\n  typeof (globalThis as any).CSSStyleSheet !== 'undefined' &&\r\n  'replaceSync' in (CSSStyleSheet.prototype as any);\r\n\r\nconst isShadowRoot = (node: any): node is ShadowRoot =>\r\n  typeof (globalThis as any).ShadowRoot !== 'undefined' && node instanceof (globalThis as any).ShadowRoot;\r\n\r\ntype Ctx = {\r\n  getShadowRoot: ShadowRootFn;\r\n  injectStyle: (css: StyleSheetRaw, id: string) => void;\r\n  injectLink: (href: string, id?: string) => void;\r\n  removeStyle?: (id: string) => void;\r\n} | null;\r\n\r\nconst ShadowRootContext = createContext<Ctx>(null);\r\n\r\nlet warnedOnce = false;\r\n\r\nexport const useShadowRoot = () => {\r\n  const ctx = useContext(ShadowRootContext);\r\n  if (!ctx) {\r\n    if (!warnedOnce) {\r\n      // Dev-friendly, harmless in prod too; only once.\r\n      console.warn('useShadowRoot called outside provider; falling back to document.');\r\n      warnedOnce = true;\r\n    }\r\n\r\n    const injectStyle = (css: string, id: string) => {\r\n      if (!hasDOM) return;\r\n      const existing = document.head.querySelector<HTMLStyleElement>(`style[data-style-id=\"${id}\"]`);\r\n      if (existing) return;\r\n      const style = document.createElement('style');\r\n      style.dataset.styleId = id;\r\n      style.textContent = css;\r\n      document.head.appendChild(style);\r\n    };\r\n\r\n    const injectLink = (href: string, id?: string) => {\r\n      if (!hasDOM) return;\r\n      const selector = id\r\n        ? `link[data-style-id=\"${id}\"]`\r\n        : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n      if (document.head.querySelector(selector)) return;\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = href;\r\n      if (id) link.dataset.styleId = id;\r\n      document.head.appendChild(link);\r\n    };\r\n\r\n    const removeStyle = (id: string) => {\r\n      if (!hasDOM) return;\r\n      document.head.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n    };\r\n\r\n    return {\r\n      getShadowRoot: () => null,\r\n      injectStyle,\r\n      injectLink,\r\n      removeStyle,\r\n    };\r\n  }\r\n  return ctx;\r\n};\r\n\r\nexport function ShadowRootProvider({\r\n  getShadowRoot,\r\n  children,\r\n}: {\r\n  getShadowRoot: ShadowRootFn;\r\n  children: ReactNode;\r\n}) {\r\n  // Cache constructed sheets per ID (per provider)\r\n  const sheetCacheRef = useRef<Map<string, CSSStyleSheet>>(new Map());\r\n\r\n  const injectStyle = (css: string, id: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // If no shadow root, gracefully inject into document.head\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      const existing = document.head.querySelector<HTMLStyleElement>(`style[data-style-id=\"${id}\"]`);\r\n      if (existing) return;\r\n      const style = document.createElement('style');\r\n      style.dataset.styleId = id;\r\n      style.textContent = css;\r\n      document.head.appendChild(style);\r\n      return;\r\n    }\r\n\r\n    // Shadow root path\r\n    if (hasConstructedSheets) {\r\n      let sheet = sheetCacheRef.current.get(id);\r\n      if (!sheet) {\r\n        sheet = new (CSSStyleSheet as any)();\r\n        sheet.replaceSync(css);\r\n        sheetCacheRef.current.set(id, sheet);\r\n      }\r\n      if (!root.adoptedStyleSheets.includes(sheet)) {\r\n        root.adoptedStyleSheets = [...root.adoptedStyleSheets, sheet];\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Fallback <style> in shadow root\r\n    if (root.querySelector(`style[data-style-id=\"${id}\"]`)) return;\r\n    const style = document.createElement('style');\r\n    style.textContent = css;\r\n    (style as any).dataset.styleId = id;\r\n    root.appendChild(style);\r\n  };\r\n\r\n  const injectLink = (href: string, id?: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // If no shadow root, use document.head\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      const selector = id\r\n        ? `link[data-style-id=\"${id}\"]`\r\n        : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n      if (document.head.querySelector(selector)) return;\r\n      const link = document.createElement('link');\r\n      link.rel = 'stylesheet';\r\n      link.href = href;\r\n      if (id) (link as any).dataset.styleId = id;\r\n      document.head.appendChild(link);\r\n      return;\r\n    }\r\n\r\n    // Shadow root link injection\r\n    const selector = id ? `link[data-style-id=\"${id}\"]` : `link[rel=\"stylesheet\"][href=\"${href}\"]`;\r\n    if (root.querySelector(selector)) return;\r\n    const link = document.createElement('link');\r\n    link.rel = 'stylesheet';\r\n    link.href = href;\r\n    if (id) (link as any).dataset.styleId = id;\r\n    root.appendChild(link);\r\n  };\r\n\r\n  const removeStyle = (id: string) => {\r\n    const root = getShadowRoot();\r\n\r\n    // Remove from doc head if no shadow root\r\n    if (!isShadowRoot(root)) {\r\n      if (!hasDOM) return;\r\n      document.head.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n      return;\r\n    }\r\n\r\n    if (hasConstructedSheets) {\r\n      const sheet = sheetCacheRef.current.get(id);\r\n      if (sheet) {\r\n        root.adoptedStyleSheets = root.adoptedStyleSheets.filter((s) => s !== sheet);\r\n      }\r\n      return;\r\n    }\r\n    root.querySelector(`style[data-style-id=\"${id}\"]`)?.remove();\r\n  };\r\n\r\n  return (\r\n    <ShadowRootContext.Provider value={{ getShadowRoot, injectStyle, injectLink, removeStyle }}>\r\n      {children}\r\n    </ShadowRootContext.Provider>\r\n  );\r\n}\r\n","// src/utils/context-providers/style-injector.ts\r\nimport { useEffect } from 'react';\r\nimport { useShadowRoot } from './shadow-root-context';\r\n\r\n// Augment Window locally so TS always sees the field here\r\ndeclare global {\r\n  interface Window {\r\n    __DYNAMIC_STYLE_IDS__?: Set<string>;\r\n  }\r\n}\r\n\r\n// Safe handle to window (SSR-friendly)\r\nconst win: (Window & { __DYNAMIC_STYLE_IDS__?: Set<string> }) | undefined =\r\n  typeof window !== 'undefined' ? window : undefined;\r\n\r\n// Global dedupe set (persisted on window between renders)\r\nconst globalStyleIds: Set<string> = (() => {\r\n  if (!win) return new Set<string>();\r\n  if (!win.__DYNAMIC_STYLE_IDS__) win.__DYNAMIC_STYLE_IDS__ = new Set<string>();\r\n  return win.__DYNAMIC_STYLE_IDS__;\r\n})();\r\n\r\nexport const useStyleInjection = (css: string, id: string) => {\r\n  const { injectStyle, getShadowRoot } = useShadowRoot() || {};\r\n\r\n  useEffect(() => {\r\n    if (!id) {\r\n      if (process.env.NODE_ENV !== 'production') {\r\n        console.warn('useStyleInjection: id is required for dedupe');\r\n      }\r\n      return;\r\n    }\r\n\r\n    const shadowRoot = getShadowRoot?.();\r\n    const isInShadow = shadowRoot && shadowRoot !== document;\r\n\r\n    if (isInShadow && injectStyle) {\r\n      // Shadow DOM dedupe by ID\r\n      if (!shadowRoot.querySelector(`style[data-style-id=\"${id}\"]`)) {\r\n        injectStyle(css, id); // provider handles DOM append\r\n      }\r\n      return;\r\n    }\r\n\r\n    // Global dedupe (memo + DOM check as a safety)\r\n    if (!globalStyleIds.has(id)) {\r\n      const existing = document.head.querySelector(`style[data-style-id=\"${id}\"]`);\r\n      if (!existing) {\r\n        const styleEl = document.createElement('style');\r\n        styleEl.textContent = css;\r\n        styleEl.dataset.styleId = id;\r\n        document.head.appendChild(styleEl);\r\n      }\r\n      globalStyleIds.add(id);\r\n    }\r\n  }, [css, id, injectStyle, getShadowRoot]);\r\n};\r\n"],"names":["colorMapping","colorMapping2","observer","setupIntersectionObserver","pauseAnimation","rootElement","document","disconnect","applyTransform","percentage","imageContainer","imageContainer2","imageContainerTransform","imageContainer2Transform","imageContainerZIndex","imageContainer2ZIndex","width","window","innerWidth","style","transform","zIndex","observerCallback","entries","forEach","entry","element","target","querySelector","rect","getBoundingClientRect","vh","innerHeight","vc","Math","max","min","height","top","observerOptions","threshold","Array","from","length","_","i","IntersectionObserver","cards","querySelectorAll","card","index","img1","img2","observe","stripSvgPreamble","s","replace","trim","isInlineSvg","t","test","asInlineSvg","escapeAttr","String","toImgHtml","src","normalizeIconMap","raw","out","k","v","Object","toClientIconMap","list","it","title","inline","icon","url","fetchSVGIcons","fetchImages","cache","inFlight","getPreloadedDynamicTheme","primeDynamicThemeFromSSR","data","whenDynamicThemePreloadReady","icons","images","toIconMap","reduce","acc","val","ensureDynamicThemeIcons","iconsRaw","isArray","ensureDynamicThemeImages","imagesRaw","ensureDynamicThemePreload","Promise","all","then","finally","__DYNAMIC_THEME_PRELOAD__","React","useEffect","useMemo","useRef","useState","loadable","createPortal","useSsrData","useStyleInjection","primeFromSSR","ensureDynamicPreload","enhanceDynamicThemeSSR","miscCss","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","Navigation","resolved","chunkName","isReady","props","key","resolve","__webpack_modules__","importAsync","requireAsync","requireSync","id","__webpack_require__","eval","require","resolveWeak","ssr","FireworksDisplay","Footer","TitleDivider","PauseButton","DynamicTheme","NavigationPortal","setTarget","getElementById","items","customArrowIcon2","arrow1","customArrowIcon","arrow2","activeColor","isInShadow","scrollLockContainer","undefined","FireworksPortal","lastKnownColor","onToggleFireworks","TitlePortal","svgIcon","logoSvg","movingTextColors","PausePortal","className","children","toggleP5Animation","onToggle","FooterPortal","linkArrowIcon","DynamicThemeRoute","preload","preloaded","dynamicTheme","setItems","setIcons","setPauseAnimation","setActiveColor","fwToggleRef","handleSetToggleFireworks","fn","current","handlePauseToggle","isEnabled","w","boot","dead","keys","catch","map","prev","onColorChange","alt","colors","propsMemo","logoSmall","createSsrAltObserver","SEL","imgPref","imgFallback","normalizeForSort","normalize","toLocaleLowerCase","compareAsc","a","b","localeCompare","sensitivity","numeric","ignorePunctuation","compareDesc","shuffleArray","arr","j","floor","random","getAltFromCard","cardEl","img","getAttribute","replaceAllCompat","h","n","r","split","join","retagIndexClasses","oldIndex","newIndex","rewrite","el","node","cls","next","debounce","ms","args","clearTimeout","setTimeout","hexToRgba","hex","alpha","m","exec","parseInt","g","computeViewportIndex","applySortChromeColorFromDomOrder","listContainer","sortRoot","idx","color","borderRgba","border","boxShadow","upgradeVisibleImages","container","imgs","visible","bottom","full","dataset","srcFull","removeAttribute","fullUrl","reject","ghost","Image","decoding","fetchPriority","onload","onerror","_bgHQStarted","_bgCancel","upgradeAllImagesInBackground","root","maxConcurrent","pool","Set","cancelled","allImgs","vhMid","scrollY","sort","ra","rb","ya","yb","abs","pump","size","task","isConnected","delete","add","cancel","opts","host","__enhanced","classList","remove","pointerEvents","snapshot","selectEl","arrowEl","selectedValueEl","optionsEl","createElement","display","innerHTML","appendChild","openOptions","closeOptions","addEventListener","e","contains","isOpen","setSelectedLabel","mode","textContent","setSelectedClass","o","toggle","prefersReduced","matchMedia","matches","altObs","rearmAlt","dispose","onActivate","alt1","onDeactivate","afterReorder","rearm","opt","closest","ordered","A","B","frag","createDocumentFragment","idxClass","find","c","pop","onResize","minActiveRatio","Error","currentlyActiveAlt","highestVisibility","debounceTimeout","thresholds","getImageAlt","handleEntries","intersectionRatio","visibility","io","simplified","rootMargin","observeAll","triggerInitial","viewportHeight","synthetic","debugState","createContext","useContext","hasDOM","hasConstructedSheets","globalThis","Document","prototype","CSSStyleSheet","isShadowRoot","ShadowRoot","ShadowRootContext","warnedOnce","useShadowRoot","ctx","console","warn","injectStyle","css","existing","head","styleId","injectLink","href","selector","link","rel","removeStyle","getShadowRoot","ShadowRootProvider","sheetCacheRef","Map","sheet","get","replaceSync","set","adoptedStyleSheets","includes","filter","Provider","value","win","globalStyleIds","__DYNAMIC_STYLE_IDS__","process","env","NODE_ENV","shadowRoot","has","styleEl"],"sourceRoot":""}