{"version":3,"file":"dynamic-app-components-title.server.js","mappings":"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","sources":["webpack://personal-site/./src/dynamic-app/components/title.jsx"],"sourcesContent":["// TitleDivider component (no flicker on enter/leave)\r\nimport { useEffect, useMemo, useRef, useState } from 'react';\r\nimport { useStyleInjection } from '../../utils/context-providers/style-injector.ts';\r\nimport titleCss from '../../styles/dynamic-app/title.css?raw';\r\n\r\nconst isTriplet = (v) => Array.isArray(v) && v.length === 3 && v.every(x => typeof x === 'string');\r\n\r\nconst TitleDivider = ({ svgIcon, movingTextColors, pauseAnimation }) => {\r\n  useStyleInjection(titleCss, 'dynamic-app-style-title');\r\n\r\n  // ----- visibility of this component -----\r\n  const rootRef = useRef(null);\r\n  const [isVisible, setIsVisible] = useState(true);\r\n  useEffect(() => {\r\n    const el = rootRef.current;\r\n    if (!el || typeof IntersectionObserver === 'undefined') return;\r\n    const io = new IntersectionObserver(\r\n      ([entry]) => setIsVisible(!!entry.isIntersecting),\r\n      { threshold: 0.01 }\r\n    );\r\n    io.observe(el);\r\n    return () => io.disconnect();\r\n  }, []);\r\n\r\n  // ----- stable palette that only changes when visible -----\r\n  const defaultTriplet = ['#70c6b0', '#5670b5', '#50b0c5'];\r\n  const incoming = isTriplet(movingTextColors) ? movingTextColors : defaultTriplet;\r\n\r\n  const [stableColors, setStableColors] = useState(incoming);\r\n  const pendingRef = useRef(null);\r\n\r\n  // shallow compare helper\r\n  const sameTriplet = (a, b) => a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\r\n\r\n  // When palette prop changes: apply immediately if visible, else stash it.\r\n  useEffect(() => {\r\n    if (!isTriplet(incoming)) return;\r\n    if (isVisible) {\r\n      setStableColors(prev => (sameTriplet(prev, incoming) ? prev : incoming));\r\n      pendingRef.current = null;\r\n    } else {\r\n      // hold for later to avoid flicker while hidden\r\n      pendingRef.current = incoming;\r\n    }\r\n  }, [incoming, isVisible]);\r\n\r\n  // When we become visible, commit any pending palette once.\r\n  useEffect(() => {\r\n    if (isVisible && pendingRef.current && !sameTriplet(stableColors, pendingRef.current)) {\r\n      setStableColors(pendingRef.current);\r\n      pendingRef.current = null;\r\n    }\r\n  }, [isVisible, stableColors]);\r\n\r\n  // ----- brightness adjust + smooth transition -----\r\n  const adjustBrightness = (hex, mul) => {\r\n    if (!/^#[0-9a-f]{6}$/i.test(hex)) return hex;\r\n    let r = parseInt(hex.slice(1, 3), 16);\r\n    let g = parseInt(hex.slice(3, 5), 16);\r\n    let b = parseInt(hex.slice(5, 7), 16);\r\n    r = Math.min(255, Math.max(0, Math.floor(r * mul)));\r\n    g = Math.min(255, Math.max(0, Math.floor(g * mul)));\r\n    b = Math.min(255, Math.max(0, Math.floor(b * mul)));\r\n    return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;\r\n  };\r\n\r\n  const colors = useMemo(() => ([\r\n    adjustBrightness(stableColors[0], 1.05),\r\n    adjustBrightness(stableColors[1], 1.25),\r\n    adjustBrightness(stableColors[2], 1.10),\r\n  ]), [stableColors]);\r\n\r\n  const textSegments = useMemo(() => ([\r\n    { text: 'Institute Gallery', suffix: '' },\r\n    { text: 'Dyna', suffix: 'mic Media' },\r\n    { text: 'Dyn', suffix: 'mic Media' },\r\n  ]), []);\r\n\r\n  const renderMovingContent = (repeatCount = 2) =>\r\n    [...Array(repeatCount)].flatMap((_, repeatIndex) =>\r\n      textSegments.map((segment, i) => (\r\n        <span\r\n          key={`${repeatIndex}-${i}`}\r\n          className=\"moving-text\"\r\n          style={{\r\n            color: colors[i],\r\n            transition: 'color 180ms linear',\r\n          }}\r\n        >\r\n          {segment.text}\r\n          <span className=\"logo-container\">\r\n            <span\r\n              className=\"svg-icon\"\r\n              // If your injected SVG respects currentColor, you could instead set color here.\r\n              style={{ fill: colors[i], transition: 'fill 180ms linear' }}\r\n              dangerouslySetInnerHTML={{ __html: svgIcon }}\r\n            />\r\n          </span>\r\n          {segment.suffix}\r\n        </span>\r\n      ))\r\n    );\r\n\r\n  return (\r\n    <div className=\"title-container\" ref={rootRef}>\r\n      <div className=\"static-title\">\r\n        <h1>MassArt 2024</h1>\r\n      </div>\r\n      <div className={`moving-title ${pauseAnimation ? 'paused' : ''}`}>\r\n        <h1 className=\"title-with-icon moving-text-wrapper\">\r\n          {renderMovingContent()}\r\n        </h1>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TitleDivider;\r\n"],"names":["useEffect","useMemo","useRef","useState","useStyleInjection","titleCss","jsx","_jsx","jsxs","_jsxs","isTriplet","v","Array","isArray","length","every","x","TitleDivider","svgIcon","movingTextColors","pauseAnimation","rootRef","isVisible","setIsVisible","el","current","IntersectionObserver","io","entry","isIntersecting","threshold","observe","disconnect","defaultTriplet","incoming","stableColors","setStableColors","pendingRef","sameTriplet","a","b","prev","adjustBrightness","hex","mul","test","r","parseInt","slice","g","Math","min","max","floor","toString","padStart","colors","textSegments","text","suffix","renderMovingContent","repeatCount","flatMap","_","repeatIndex","map","segment","i","className","style","color","transition","children","fill","dangerouslySetInnerHTML","__html","ref"],"sourceRoot":""}